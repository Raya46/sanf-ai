exports.id=80,exports.ids=[80],exports.modules={659:()=>{},17405:(e,t,a)=>{Promise.resolve().then(a.bind(a,50417))},21963:(e,t,a)=>{"use strict";a.d(t,{G:()=>W});var r=a(60687),s=a(80281),n=a(2975),l=a(43210),i=a(4780),o=a(4127);function c({chat:e,sources:t,color:a,position:s="start"}){let n=a?.includes("text-white");return(0,r.jsx)("div",{className:(0,i.cn)("flex w-full","end"===s?"justify-end":"justify-start"),children:(0,r.jsxs)("div",{className:(0,i.cn)("max-w-[80%] rounded-lg p-3",a),children:[(0,r.jsx)("div",{className:(0,i.cn)("prose prose-sm max-w-none prose-p:my-0 prose-ul:my-2 prose-ol:my-2 prose-headings:my-2",n?"text-white":"text-black"),children:(0,r.jsx)(o.oz,{children:e})}),t&&(0,r.jsxs)("div",{className:(0,i.cn)("mt-2 text-xs",n?"text-blue-200":"text-gray-500"),children:[(0,r.jsx)("span",{className:"font-semibold",children:"Sources:"})," ",t]})]})})}var d=a(29523),u=a(85763),x=a(34729);function h({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,r.jsx)("table",{"data-slot":"table",className:(0,i.cn)("w-full caption-bottom text-sm",e),...t})})}function m({className:e,...t}){return(0,r.jsx)("thead",{"data-slot":"table-header",className:(0,i.cn)("[&_tr]:border-b",e),...t})}function f({className:e,...t}){return(0,r.jsx)("tbody",{"data-slot":"table-body",className:(0,i.cn)("[&_tr:last-child]:border-0",e),...t})}function p({className:e,...t}){return(0,r.jsx)("tr",{"data-slot":"table-row",className:(0,i.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function g({className:e,...t}){return(0,r.jsx)("th",{"data-slot":"table-head",className:(0,i.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function b({className:e,...t}){return(0,r.jsx)("td",{"data-slot":"table-cell",className:(0,i.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}var j=a(85726),v=a(89422),y=a(44493);function N(){let[e,t]=(0,l.useState)(null),[a,i]=(0,l.useState)(!0),[o,u]=(0,l.useState)(null),N=(0,l.useRef)(null),{messages:w,input:k,handleInputChange:_,handleSubmit:S,isLoading:C}=(0,s.Y_)({api:"/api/chat",body:{macroData:e},initialMessages:[{id:"1",role:"assistant",content:"Data makroekonomi telah dimuat. Tanyakan apa pun tentang data ini atau hubungannya dengan analisis kredit."}]});return console.log(o),(0,r.jsxs)("div",{className:"flex flex-col flex-1 gap-4 h-full overflow-y-auto p-1",children:[(0,r.jsx)("div",{className:"grid gap-4 md:grid-cols-1",children:(0,r.jsxs)(y.Zp,{children:[(0,r.jsx)(y.aR,{children:(0,r.jsx)(y.ZB,{children:"Commodities"})}),(0,r.jsx)(y.Wu,{children:a?(0,r.jsx)(j.E,{className:"h-48 w-full"}):(0,r.jsxs)(h,{children:[(0,r.jsx)(m,{children:(0,r.jsxs)(p,{children:[(0,r.jsx)(g,{children:"Commodity"}),(0,r.jsx)(g,{className:"text-right",children:"Price"}),(0,r.jsx)(g,{className:"text-right",children:"Day"}),(0,r.jsx)(g,{className:"text-right",children:"%"})]})}),(0,r.jsx)(f,{children:e?.energy_prices.map(e=>(0,r.jsxs)(p,{children:[(0,r.jsxs)(b,{children:[(0,r.jsx)("div",{className:"font-medium",children:e.Commodity}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:e.Unit})]}),(0,r.jsx)(b,{className:"text-right",children:e.Price}),(0,r.jsxs)(b,{className:`text-right flex items-center justify-end gap-1 ${!String(e.Day).startsWith("-")?"text-green-600":"text-red-600"}`,children:[String(e.Day).startsWith("-")?(0,r.jsx)(v.A,{className:"h-3 w-3"}):(0,r.jsx)(n.A,{className:"h-3 w-3"}),e.Day]}),(0,r.jsx)(b,{className:`text-right ${!e["%"].startsWith("-")?"text-green-600":"text-red-600"}`,children:e["%"]})]},e.Commodity))})]})})]})}),(0,r.jsxs)(y.Zp,{className:"flex flex-col flex-1",children:[(0,r.jsxs)(y.Wu,{className:"flex-1 flex flex-col gap-3 overflow-y-auto",children:[w.map(e=>(0,r.jsx)(c,{color:"user"===e.role?"bg-blue-500 text-white":"bg-muted",position:"user"===e.role?"end":"start",chat:e.content},e.id)),C&&(0,r.jsx)(c,{color:"bg-muted",position:"start",chat:"Analyzing..."})]}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),k.trim()&&S(e)},className:"relative w-full p-4",children:[(0,r.jsx)(x.T,{ref:N,value:k,onChange:_,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),S(e))},placeholder:"Ask about the data...",className:"min-h-[40px] w-full resize-none rounded-2xl !text-base bg-muted pr-12",rows:1,disabled:C||a}),(0,r.jsx)("div",{className:"absolute bottom-4 right-4 p-2",children:(0,r.jsx)(d.$,{type:"submit",disabled:C||!k.trim(),className:"rounded-full bg-blue-500 p-1.5 h-fit",size:"icon",children:(0,r.jsx)(n.A,{className:"w-4 h-4"})})})]})]})]})}var w=a(48482),k=a(38246),_=a(57359);let S={light:"",dark:".dark"},C=l.createContext(null);function I({id:e,className:t,children:a,config:s,...n}){let o=l.useId(),c=`chart-${e||o.replace(/:/g,"")}`;return(0,r.jsx)(C.Provider,{value:{config:s},children:(0,r.jsxs)("div",{"data-slot":"chart","data-chart":c,className:(0,i.cn)("[&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border flex aspect-video justify-center text-xs [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-sector]:outline-hidden [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-surface]:outline-hidden",t),...n,children:[(0,r.jsx)(M,{id:c,config:s}),(0,r.jsx)(w.u,{children:a})]})})}let M=({id:e,config:t})=>{let a=Object.entries(t).filter(([,e])=>e.theme||e.color);return a.length?(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(S).map(([t,r])=>`
${r} [data-chart=${e}] {
${a.map(([e,a])=>{let r=a.theme?.[t]||a.color;return r?`  --color-${e}: ${r};`:null}).join("\n")}
}
`).join("\n")}}):null},$=k.m;function A({active:e,payload:t,className:a,indicator:s="dot",hideLabel:n=!1,hideIndicator:o=!1,label:c,labelFormatter:d,labelClassName:u,formatter:x,color:h,nameKey:m,labelKey:f}){let{config:p}=function(){let e=l.useContext(C);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}(),g=l.useMemo(()=>{if(n||!t?.length)return null;let[e]=t,a=`${f||e?.dataKey||e?.name||"value"}`,s=D(p,e,a),l=f||"string"!=typeof c?s?.label:p[c]?.label||c;return d?(0,r.jsx)("div",{className:(0,i.cn)("font-medium",u),children:d(l,t)}):l?(0,r.jsx)("div",{className:(0,i.cn)("font-medium",u),children:l}):null},[c,d,t,n,u,p,f]);if(!e||!t?.length)return null;let b=1===t.length&&"dot"!==s;return(0,r.jsxs)("div",{className:(0,i.cn)("border-border/50 bg-background grid min-w-[8rem] items-start gap-1.5 rounded-lg border px-2.5 py-1.5 text-xs shadow-xl",a),children:[b?null:g,(0,r.jsx)("div",{className:"grid gap-1.5",children:t.map((e,t)=>{let a=`${m||e.name||e.dataKey||"value"}`,n=D(p,e,a),l=h||e.payload.fill||e.color;return(0,r.jsx)("div",{className:(0,i.cn)("[&>svg]:text-muted-foreground flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5","dot"===s&&"items-center"),children:x&&e?.value!==void 0&&e.name?x(e.value,e.name,e,t,e.payload):(0,r.jsxs)(r.Fragment,{children:[n?.icon?(0,r.jsx)(n.icon,{}):!o&&(0,r.jsx)("div",{className:(0,i.cn)("shrink-0 rounded-[2px] border-(--color-border) bg-(--color-bg)",{"h-2.5 w-2.5":"dot"===s,"w-1":"line"===s,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===s,"my-0.5":b&&"dashed"===s}),style:{"--color-bg":l,"--color-border":l}}),(0,r.jsxs)("div",{className:(0,i.cn)("flex flex-1 justify-between leading-none",b?"items-end":"items-center"),children:[(0,r.jsxs)("div",{className:"grid gap-1.5",children:[b?g:null,(0,r.jsx)("span",{className:"text-muted-foreground",children:n?.label||e.name})]}),e.value&&(0,r.jsx)("span",{className:"text-foreground font-mono font-medium tabular-nums",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})}function D(e,t,a){if("object"!=typeof t||null===t)return;let r="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,s=a;return a in t&&"string"==typeof t[a]?s=t[a]:r&&a in r&&"string"==typeof r[a]&&(s=r[a]),s in e?e[s]:e[a]}_.s;var z=a(2041),L=a(85168),T=a(27747),U=a(9920),Z=a(90812),F=a(25679);let R={revenue:{label:"Revenue"}},E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],K=e=>Math.abs(e)>=1e9?`${(e/1e9).toFixed(1)}B`:Math.abs(e)>=1e6?`${(e/1e6).toFixed(1)}M`:Math.abs(e)>=1e3?`${(e/1e3).toFixed(1)}K`:e.toString();function O({data:e}){let[t,a]=(0,l.useState)("annually"),s=(0,l.useMemo)(()=>{if(!e||0===e.length)return[];let a=[...e].sort((e,t)=>e.year-t.year||e.month-t.month);if("monthly"===t)return a.map(e=>({name:`${E[e.month-1]} '${String(e.year).slice(-2)}`,revenue:e.revenue}));let r={};return a.forEach(e=>{let a="";if("annually"===t)a=String(e.year);else{let t=`Q${Math.ceil(e.month/3)}`;a=`${t} ${e.year}`}r[a]||(r[a]=0),r[a]+=e.revenue}),Object.entries(r).map(([e,t])=>({name:e,revenue:t}))},[e,t]);return e&&0!==e.length?(0,r.jsxs)(y.Zp,{children:[(0,r.jsx)(y.aR,{children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(y.ZB,{children:"Revenue Analysis"}),(0,r.jsx)(y.BT,{children:"AI-generated revenue analysis"})]}),(0,r.jsx)(u.tU,{value:t,onValueChange:e=>a(e),className:"w-auto",children:(0,r.jsxs)(u.j7,{children:[(0,r.jsx)(u.Xi,{value:"annually",children:"Annually"}),(0,r.jsx)(u.Xi,{value:"quarterly",children:"Quarterly"}),(0,r.jsx)(u.Xi,{value:"monthly",children:"Monthly"})]})})]})}),(0,r.jsx)(y.Wu,{children:(0,r.jsx)(I,{config:R,className:"h-[300px] w-full",children:(0,r.jsxs)(z.E,{accessibilityLayer:!0,data:s,children:[(0,r.jsx)(L.d,{vertical:!1}),(0,r.jsx)(T.W,{dataKey:"name",tickLine:!1,tickMargin:10,axisLine:!1,fontSize:12}),(0,r.jsx)(U.h,{tickFormatter:K,tickLine:!1,axisLine:!1,width:50}),(0,r.jsx)($,{cursor:!1,content:(0,r.jsx)(A,{formatter:e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(e)),hideLabel:!0})}),(0,r.jsx)(Z.y,{dataKey:"revenue",children:s.map(e=>(0,r.jsx)(F.f,{fill:e.revenue>=0?"hsl(210 90% 40%)":"hsl(210 90% 30%)"},e.name))})]})})})]}):(0,r.jsxs)(y.Zp,{children:[(0,r.jsxs)(y.aR,{children:[(0,r.jsx)(y.ZB,{children:"Revenue Analysis"}),(0,r.jsx)(y.BT,{children:"No revenue data available to display."})]}),(0,r.jsx)(y.Wu,{children:(0,r.jsx)("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:(0,r.jsx)("p",{children:"Awaiting data..."})})})]})}function W({activeView:e,setActiveView:t,applicationData:a,initialMessages:i,isLoadingChat:o,applicationId:h}){let m=(0,l.useRef)(null),f=i.map(e=>({id:e.id,role:"ai"===e.sender_type?"assistant":"user",content:e.message_content})),{messages:p,input:g,handleInputChange:b,handleSubmit:j,isLoading:v,data:y}=(0,s.Y_)({api:"/api/chat",body:{applicationId:h},initialMessages:f}),w=y?.[y.length-1],k=w?.status??"Sedang menganalisis dokumen...",_=e=>{let t=e.match(/Sumber: (.*)$/),a=t?t[1]:void 0;return{mainContent:t?e.replace(/Sumber: .*$/,"").trim():e,sources:a}};return(0,r.jsx)("div",{className:"flex flex-col flex-1 bg-white gap-3 m-4 p-4 rounded-lg h-[calc(100vh-2rem)]",children:(0,r.jsxs)(u.tU,{value:e,onValueChange:e=>t(e),className:"flex flex-col h-full",children:[(0,r.jsxs)(u.j7,{children:[(0,r.jsx)(u.Xi,{value:"credit-application",children:"Credit Application"}),(0,r.jsx)(u.Xi,{value:"macroeconomics",children:"Macroeconomics"})]}),(0,r.jsxs)(u.av,{value:"credit-application",className:"flex-1 flex flex-col gap-3 mt-2 overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto flex flex-col gap-3",children:[o&&(0,r.jsx)(c,{color:"bg-transparent",position:"start",chat:"Loading chat history..."}),p.map((e,t)=>{let{mainContent:s,sources:n}=_(e.content);return(0,r.jsxs)(l.Fragment,{children:[(0,r.jsx)(c,{color:"user"===e.role?"bg-blue-500 text-white":"bg-transparent",position:"user"===e.role?"end":"start",chat:s,sources:n}),0===t&&"assistant"===e.role&&a&&(0,r.jsx)("div",{className:"px-4 py-2",children:(0,r.jsx)(O,{data:a.revenue||[]})})]},e.id)}),v&&(0,r.jsx)(c,{color:"bg-transparent",position:"start",chat:k})]}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),g.trim()&&j(e)},className:"relative w-full flex-shrink-0",children:[(0,r.jsx)(x.T,{ref:m,value:g,onChange:b,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),j(e))},placeholder:"Ketik pesan Anda...",className:"min-h-[24px] max-h-[calc(75dvh)] overflow-hidden resize-none rounded-2xl !text-base bg-muted pb-10 pr-12",rows:2,disabled:v}),(0,r.jsx)("div",{className:"absolute bottom-0 right-0 p-2 w-fit flex flex-row justify-end",children:(0,r.jsx)(d.$,{type:"submit",disabled:v||!g.trim(),className:"rounded-full bg-blue-500 p-1.5 h-fit border",size:"icon",children:(0,r.jsx)(n.A,{className:"w-4 h-4"})})})]})]}),(0,r.jsx)(u.av,{value:"macroeconomics",className:"flex-1 mt-2 overflow-hidden",children:(0,r.jsx)(N,{})})]})})}},34729:(e,t,a)=>{"use strict";a.d(t,{T:()=>n});var r=a(60687);a(43210);var s=a(4780);function n({className:e,...t}){return(0,r.jsx)("textarea",{"data-slot":"textarea",className:(0,s.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}},35965:(e,t,a)=>{Promise.resolve().then(a.bind(a,72638))},44493:(e,t,a)=>{"use strict";a.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>i,Zp:()=>n,aR:()=>l});var r=a(60687);a(43210);var s=a(4780);function n({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl py-6",e),...t})}function l({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function i({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",e),...t})}function o({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...t})}function c({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...t})}},51906:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=51906,e.exports=t},70440:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var r=a(31658);let s=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},76033:(e,t,a)=>{"use strict";a.d(t,{U:()=>n});var r=a(80261),s=a(44999);let n=async()=>{let e=await (0,s.UL)();return(0,r.createServerClient)("https://gskcziircorxypqexcuh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdza2N6aWlyY29yeHlwcWV4Y3VoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA1OTUyMTMsImV4cCI6MjA2NjE3MTIxM30.gQg76c18soHVeuRqxjnPiIji088qp7NTVguZUsyePDM",{cookies:{getAll:()=>e.getAll(),setAll(t){try{t.forEach(({name:t,value:a,options:r})=>{e.set(t,a,r)})}catch{console.log("Cookie setting error in Server Component - can be ignored if using middleware")}}}})}},84882:()=>{},85763:(e,t,a)=>{"use strict";a.d(t,{Xi:()=>o,av:()=>c,j7:()=>i,tU:()=>l});var r=a(60687);a(43210);var s=a(55146),n=a(4780);function l({className:e,...t}){return(0,r.jsx)(s.bL,{"data-slot":"tabs",className:(0,n.cn)("flex flex-col gap-2",e),...t})}function i({className:e,...t}){return(0,r.jsx)(s.B8,{"data-slot":"tabs-list",className:(0,n.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function o({className:e,...t}){return(0,r.jsx)(s.l9,{"data-slot":"tabs-trigger",className:(0,n.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function c({className:e,...t}){return(0,r.jsx)(s.UC,{"data-slot":"tabs-content",className:(0,n.cn)("flex-1 outline-none",e),...t})}},86725:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(37413),s=a(50417),n=a(76033),l=a(39916);async function i({children:e,params:t}){let{projectId:a}=await t,i=await (0,n.U)(),{data:{user:o}}=await i.auth.getUser();return o?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.SidebarInset,{children:e})}):(0,l.redirect)("/login")}}};