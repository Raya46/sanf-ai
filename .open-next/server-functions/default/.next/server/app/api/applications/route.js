(()=>{var e={};e.id=179,e.ids=[179],e.modules={659:()=>{},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4128:(e,t,r)=>{"use strict";function n(e){throw Object.defineProperty(Error("cacheLife() is only available with the experimental.useCache config."),"__NEXT_ERROR_CODE",{value:"E627",enumerable:!1,configurable:!0})}Object.defineProperty(t,"F",{enumerable:!0,get:function(){return n}}),r(29294),r(63033)},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},19610:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getSortedRouteObjects:function(){return a},getSortedRoutes:function(){return n}});class r{insert(e){this._insert(e.split("/").filter(Boolean),[],!1)}smoosh(){return this._smoosh()}_smoosh(e){void 0===e&&(e="/");let t=[...this.children.keys()].sort();null!==this.slugName&&t.splice(t.indexOf("[]"),1),null!==this.restSlugName&&t.splice(t.indexOf("[...]"),1),null!==this.optionalRestSlugName&&t.splice(t.indexOf("[[...]]"),1);let r=t.map(t=>this.children.get(t)._smoosh(""+e+t+"/")).reduce((e,t)=>[...e,...t],[]);if(null!==this.slugName&&r.push(...this.children.get("[]")._smoosh(e+"["+this.slugName+"]/")),!this.placeholder){let t="/"===e?"/":e.slice(0,-1);if(null!=this.optionalRestSlugName)throw Object.defineProperty(Error('You cannot define a route with the same specificity as a optional catch-all route ("'+t+'" and "'+t+"[[..."+this.optionalRestSlugName+']]").'),"__NEXT_ERROR_CODE",{value:"E458",enumerable:!1,configurable:!0});r.unshift(t)}return null!==this.restSlugName&&r.push(...this.children.get("[...]")._smoosh(e+"[..."+this.restSlugName+"]/")),null!==this.optionalRestSlugName&&r.push(...this.children.get("[[...]]")._smoosh(e+"[[..."+this.optionalRestSlugName+"]]/")),r}_insert(e,t,n){if(0===e.length){this.placeholder=!1;return}if(n)throw Object.defineProperty(Error("Catch-all must be the last part of the URL."),"__NEXT_ERROR_CODE",{value:"E392",enumerable:!1,configurable:!0});let a=e[0];if(a.startsWith("[")&&a.endsWith("]")){let r=a.slice(1,-1),s=!1;if(r.startsWith("[")&&r.endsWith("]")&&(r=r.slice(1,-1),s=!0),r.startsWith("…"))throw Object.defineProperty(Error("Detected a three-dot character ('…') at ('"+r+"'). Did you mean ('...')?"),"__NEXT_ERROR_CODE",{value:"E147",enumerable:!1,configurable:!0});if(r.startsWith("...")&&(r=r.substring(3),n=!0),r.startsWith("[")||r.endsWith("]"))throw Object.defineProperty(Error("Segment names may not start or end with extra brackets ('"+r+"')."),"__NEXT_ERROR_CODE",{value:"E421",enumerable:!1,configurable:!0});if(r.startsWith("."))throw Object.defineProperty(Error("Segment names may not start with erroneous periods ('"+r+"')."),"__NEXT_ERROR_CODE",{value:"E288",enumerable:!1,configurable:!0});function i(e,r){if(null!==e&&e!==r)throw Object.defineProperty(Error("You cannot use different slug names for the same dynamic path ('"+e+"' !== '"+r+"')."),"__NEXT_ERROR_CODE",{value:"E337",enumerable:!1,configurable:!0});t.forEach(e=>{if(e===r)throw Object.defineProperty(Error('You cannot have the same slug name "'+r+'" repeat within a single dynamic path'),"__NEXT_ERROR_CODE",{value:"E247",enumerable:!1,configurable:!0});if(e.replace(/\W/g,"")===a.replace(/\W/g,""))throw Object.defineProperty(Error('You cannot have the slug names "'+e+'" and "'+r+'" differ only by non-word symbols within a single dynamic path'),"__NEXT_ERROR_CODE",{value:"E499",enumerable:!1,configurable:!0})}),t.push(r)}if(n)if(s){if(null!=this.restSlugName)throw Object.defineProperty(Error('You cannot use both an required and optional catch-all route at the same level ("[...'+this.restSlugName+']" and "'+e[0]+'" ).'),"__NEXT_ERROR_CODE",{value:"E299",enumerable:!1,configurable:!0});i(this.optionalRestSlugName,r),this.optionalRestSlugName=r,a="[[...]]"}else{if(null!=this.optionalRestSlugName)throw Object.defineProperty(Error('You cannot use both an optional and required catch-all route at the same level ("[[...'+this.optionalRestSlugName+']]" and "'+e[0]+'").'),"__NEXT_ERROR_CODE",{value:"E300",enumerable:!1,configurable:!0});i(this.restSlugName,r),this.restSlugName=r,a="[...]"}else{if(s)throw Object.defineProperty(Error('Optional route parameters are not yet supported ("'+e[0]+'").'),"__NEXT_ERROR_CODE",{value:"E435",enumerable:!1,configurable:!0});i(this.slugName,r),this.slugName=r,a="[]"}}this.children.has(a)||this.children.set(a,new r),this.children.get(a)._insert(e.slice(1),t,n)}constructor(){this.placeholder=!0,this.children=new Map,this.slugName=null,this.restSlugName=null,this.optionalRestSlugName=null}}function n(e){let t=new r;return e.forEach(e=>t.insert(e)),t.smoosh()}function a(e,t){let r={},a=[];for(let n=0;n<e.length;n++){let i=t(e[n]);r[i]=n,a[n]=i}return n(a).map(t=>e[r[t]])}},23496:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getSortedRouteObjects:function(){return n.getSortedRouteObjects},getSortedRoutes:function(){return n.getSortedRoutes},isDynamicRoute:function(){return a.isDynamicRoute}});let n=r(19610),a=r(49022)},23870:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(55511);let a={randomUUID:n.randomUUID},i=new Uint8Array(256),s=i.length,o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));let l=function(e,t,r){if(a.randomUUID&&!t&&!e)return a.randomUUID();let l=(e=e||{}).random??e.rng?.()??(s>i.length-16&&((0,n.randomFillSync)(i),s=0),i.slice(s,s+=16));if(l.length<16)throw Error("Random bytes length must be >= 16");if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,t){if((r=r||0)<0||r+16>t.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=l[e];return t}return function(e,t=0){return(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase()}(l)}},27910:e=>{"use strict";e.exports=require("stream")},28402:e=>{"use strict";e.exports=import("@opennextjs/cloudflare")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30826:(e,t,r)=>{"use strict";Object.defineProperty(t,"e",{enumerable:!0,get:function(){return u}});let n=r(46143),a=r(37719),i=r(29294),s=r(63033),o=r(43365),l=0;async function c(e,t,r,a,i,s,l){await t.set(r,{kind:o.CachedRouteKind.FETCH,data:{headers:{},body:JSON.stringify(e),status:200,url:""},revalidate:"number"!=typeof i?n.CACHE_ONE_YEAR:i},{fetchCache:!0,tags:a,fetchIdx:s,fetchUrl:l})}function u(e,t,r={}){if(0===r.revalidate)throw Object.defineProperty(Error(`Invariant revalidate: 0 can not be passed to unstable_cache(), must be "false" or "> 0" ${e.toString()}`),"__NEXT_ERROR_CODE",{value:"E57",enumerable:!1,configurable:!0});let n=r.tags?(0,a.validateTags)(r.tags,`unstable_cache ${e.toString()}`):[];(0,a.validateRevalidate)(r.revalidate,`unstable_cache ${e.name||e.toString()}`);let d=`${e.toString()}-${Array.isArray(t)&&t.join(",")}`;return async(...t)=>{let a=i.workAsyncStorage.getStore(),u=s.workUnitAsyncStorage.getStore(),h=(null==a?void 0:a.incrementalCache)||globalThis.__incrementalCache;if(!h)throw Object.defineProperty(Error(`Invariant: incrementalCache missing in unstable_cache ${e.toString()}`),"__NEXT_ERROR_CODE",{value:"E469",enumerable:!1,configurable:!0});let p=u&&"prerender"===u.type?u.cacheSignal:null;p&&p.beginRead();try{let i=u&&"request"===u.type?u:void 0,p=(null==i?void 0:i.url.pathname)??(null==a?void 0:a.route)??"",f=new URLSearchParams((null==i?void 0:i.url.search)??""),m=[...f.keys()].sort((e,t)=>e.localeCompare(t)).map(e=>`${e}=${f.get(e)}`).join("&"),g=`${d}-${JSON.stringify(t)}`,y=await h.generateCacheKey(g),_=`unstable_cache ${p}${m.length?"?":""}${m} ${e.name?` ${e.name}`:y}`,b=(a?a.nextFetchId:l)??1,v=null==u?void 0:u.implicitTags,E={type:"unstable-cache",phase:"render",implicitTags:v,draftMode:u&&a&&(0,s.getDraftModeProviderForCacheScope)(a,u)};if(a){if(a.nextFetchId=b+1,u&&("cache"===u.type||"prerender"===u.type||"prerender-ppr"===u.type||"prerender-legacy"===u.type)){"number"==typeof r.revalidate&&(u.revalidate<r.revalidate||(u.revalidate=r.revalidate));let e=u.tags;if(null===e)u.tags=n.slice();else for(let t of n)e.includes(t)||e.push(t)}if(!(u&&"unstable-cache"===u.type)&&"force-no-store"!==a.fetchCache&&!a.isOnDemandRevalidate&&!h.isOnDemandRevalidate&&!a.isDraftMode){let i=await h.get(y,{kind:o.IncrementalCacheKind.FETCH,revalidate:r.revalidate,tags:n,softTags:null==v?void 0:v.tags,fetchIdx:b,fetchUrl:_});if(i&&i.value)if(i.value.kind!==o.CachedRouteKind.FETCH)console.error(`Invariant invalid cacheEntry returned for ${g}`);else{let o=void 0!==i.value.data.body?JSON.parse(i.value.data.body):void 0;return i.isStale&&(a.pendingRevalidates||(a.pendingRevalidates={}),a.pendingRevalidates[g]=s.workUnitAsyncStorage.run(E,e,...t).then(e=>c(e,h,y,n,r.revalidate,b,_)).catch(e=>console.error(`revalidating cache with key: ${g}`,e))),o}}let i=await s.workUnitAsyncStorage.run(E,e,...t);return a.isDraftMode||c(i,h,y,n,r.revalidate,b,_),i}{if(l+=1,!h.isOnDemandRevalidate){let e=await h.get(y,{kind:o.IncrementalCacheKind.FETCH,revalidate:r.revalidate,tags:n,fetchIdx:b,fetchUrl:_,softTags:null==v?void 0:v.tags});if(e&&e.value){if(e.value.kind!==o.CachedRouteKind.FETCH)console.error(`Invariant invalid cacheEntry returned for ${g}`);else if(!e.isStale)return void 0!==e.value.data.body?JSON.parse(e.value.data.body):void 0}}let a=await s.workUnitAsyncStorage.run(E,e,...t);return c(a,h,y,n,r.revalidate,b,_),a}}finally{p&&p.endRead()}}}},33778:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{patchFetch:()=>c,routeModule:()=>u,serverHooks:()=>p,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>h});var a=r(96559),i=r(48088),s=r(37719),o=r(92079),l=e([o]);o=(l.then?(await l)():l)[0];let u=new a.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/applications/route",pathname:"/api/applications",filename:"route",bundlePath:"app/api/applications/route"},resolvedPagePath:"C:\\Users\\raya\\project\\belajar_nextjs\\sanf-ai\\src\\app\\api\\applications\\route.ts",nextConfigOutput:"standalone",userland:o}),{workAsyncStorage:d,workUnitAsyncStorage:h,serverHooks:p}=u;function c(){return(0,s.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:h})}n()}catch(e){n(e)}})},34631:e=>{"use strict";e.exports=require("tls")},35499:(e,t)=>{"use strict";function r(e){return"("===e[0]&&e.endsWith(")")}function n(e){return e.startsWith("@")&&"@children"!==e}function a(e,t){if(e.includes(i)){let e=JSON.stringify(t);return"{}"!==e?i+"?"+e:i}return e}Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DEFAULT_SEGMENT_KEY:function(){return s},PAGE_SEGMENT_KEY:function(){return i},addSearchParamsIfPageSegment:function(){return a},isGroupSegment:function(){return r},isParallelRouteSegment:function(){return n}});let i="__PAGE__",s="__DEFAULT__"},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},49022:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isDynamicRoute",{enumerable:!0,get:function(){return s}});let n=r(71437),a=/\/[^/]*\[[^/]+\][^/]*(?=\/|$)/,i=/\/\[[^/]+\](?=\/|$)/;function s(e,t){return(void 0===t&&(t=!0),(0,n.isInterceptionRouteAppPath)(e)&&(e=(0,n.extractInterceptionRouteInformation)(e).interceptedRoute),t)?i.test(e):a.test(e)}},51906:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=51906,e.exports=t},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},62351:(e,t,r)=>{let n={unstable_cache:r(30826).e,revalidateTag:r(83518).revalidateTag,revalidatePath:r(83518).revalidatePath,unstable_expireTag:r(83518).unstable_expireTag,unstable_expirePath:r(83518).unstable_expirePath,unstable_noStore:r(68553).M,unstable_cacheLife:r(4128).F,unstable_cacheTag:r(72932).z};e.exports=n,t.unstable_cache=n.unstable_cache,t.revalidatePath=n.revalidatePath,t.revalidateTag=n.revalidateTag,t.unstable_expireTag=n.unstable_expireTag,t.unstable_expirePath=n.unstable_expirePath,t.unstable_noStore=n.unstable_noStore,t.unstable_cacheLife=n.unstable_cacheLife,t.unstable_cacheTag=n.unstable_cacheTag},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68553:(e,t,r)=>{"use strict";Object.defineProperty(t,"M",{enumerable:!0,get:function(){return s}});let n=r(29294),a=r(63033),i=r(84971);function s(){let e=n.workAsyncStorage.getStore(),t=a.workUnitAsyncStorage.getStore();if(e)!e.forceStatic&&(e.isUnstableNoStore=!0,t&&"prerender"===t.type||(0,i.markCurrentScopeAsDynamic)(e,t,"unstable_noStore()"))}},71437:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{INTERCEPTION_ROUTE_MARKERS:function(){return a},extractInterceptionRouteInformation:function(){return s},isInterceptionRouteAppPath:function(){return i}});let n=r(74722),a=["(..)(..)","(.)","(..)","(...)"];function i(e){return void 0!==e.split("/").find(e=>a.find(t=>e.startsWith(t)))}function s(e){let t,r,i;for(let n of e.split("/"))if(r=a.find(e=>n.startsWith(e))){[t,i]=e.split(r,2);break}if(!t||!r||!i)throw Object.defineProperty(Error("Invalid interception route: "+e+". Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>"),"__NEXT_ERROR_CODE",{value:"E269",enumerable:!1,configurable:!0});switch(t=(0,n.normalizeAppPath)(t),r){case"(.)":i="/"===t?"/"+i:t+"/"+i;break;case"(..)":if("/"===t)throw Object.defineProperty(Error("Invalid interception route: "+e+". Cannot use (..) marker at the root level, use (.) instead."),"__NEXT_ERROR_CODE",{value:"E207",enumerable:!1,configurable:!0});i=t.split("/").slice(0,-1).concat(i).join("/");break;case"(...)":i="/"+i;break;case"(..)(..)":let s=t.split("/");if(s.length<=2)throw Object.defineProperty(Error("Invalid interception route: "+e+". Cannot use (..)(..) marker at the root level or one level up."),"__NEXT_ERROR_CODE",{value:"E486",enumerable:!1,configurable:!0});i=s.slice(0,-2).concat(i).join("/");break;default:throw Object.defineProperty(Error("Invariant: unexpected marker"),"__NEXT_ERROR_CODE",{value:"E112",enumerable:!1,configurable:!0})}return{interceptingRoute:t,interceptedRoute:i}}},72932:(e,t,r)=>{"use strict";function n(...e){throw Object.defineProperty(Error("cacheTag() is only available with the experimental.useCache config."),"__NEXT_ERROR_CODE",{value:"E628",enumerable:!1,configurable:!0})}Object.defineProperty(t,"z",{enumerable:!0,get:function(){return n}}),r(63033),r(37719)},74075:e=>{"use strict";e.exports=require("zlib")},74722:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{normalizeAppPath:function(){return i},normalizeRscURL:function(){return s}});let n=r(85531),a=r(35499);function i(e){return(0,n.ensureLeadingSlash)(e.split("/").reduce((e,t,r,n)=>!t||(0,a.isGroupSegment)(t)||"@"===t[0]||("page"===t||"route"===t)&&r===n.length-1?e:e+"/"+t,""))}function s(e){return e.replace(/\.rsc($|\?)/,"$1")}},76033:(e,t,r)=>{"use strict";r.d(t,{U:()=>i});var n=r(80261),a=r(44999);let i=async()=>{let e=await (0,a.UL)();return(0,n.createServerClient)("https://gskcziircorxypqexcuh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdza2N6aWlyY29yeHlwcWV4Y3VoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA1OTUyMTMsImV4cCI6MjA2NjE3MTIxM30.gQg76c18soHVeuRqxjnPiIji088qp7NTVguZUsyePDM",{cookies:{getAll:()=>e.getAll(),setAll(t){try{t.forEach(({name:t,value:r,options:n})=>{e.set(t,r,n)})}catch{console.log("Cookie setting error in Server Component - can be ignored if using middleware")}}}})}},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83518:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{revalidatePath:function(){return h},revalidateTag:function(){return c},unstable_expirePath:function(){return u},unstable_expireTag:function(){return d}});let n=r(84971),a=r(23496),i=r(46143),s=r(29294),o=r(63033),l=r(98479);function c(e){return p([e],`revalidateTag ${e}`)}function u(e,t){if(e.length>i.NEXT_CACHE_SOFT_TAG_MAX_LENGTH)return void console.warn(`Warning: expirePath received "${e}" which exceeded max length of ${i.NEXT_CACHE_SOFT_TAG_MAX_LENGTH}. See more info here https://nextjs.org/docs/app/api-reference/functions/unstable_expirePath`);let r=`${i.NEXT_CACHE_IMPLICIT_TAG_ID}${e}`;return t?r+=`${r.endsWith("/")?"":"/"}${t}`:(0,a.isDynamicRoute)(e)&&console.warn(`Warning: a dynamic page path "${e}" was passed to "expirePath", but the "type" parameter is missing. This has no effect by default, see more info here https://nextjs.org/docs/app/api-reference/functions/unstable_expirePath`),p([r],`unstable_expirePath ${e}`)}function d(...e){return p(e,`unstable_expireTag ${e.join(", ")}`)}function h(e,t){if(e.length>i.NEXT_CACHE_SOFT_TAG_MAX_LENGTH)return void console.warn(`Warning: revalidatePath received "${e}" which exceeded max length of ${i.NEXT_CACHE_SOFT_TAG_MAX_LENGTH}. See more info here https://nextjs.org/docs/app/api-reference/functions/revalidatePath`);let r=`${i.NEXT_CACHE_IMPLICIT_TAG_ID}${e}`;return t?r+=`${r.endsWith("/")?"":"/"}${t}`:(0,a.isDynamicRoute)(e)&&console.warn(`Warning: a dynamic page path "${e}" was passed to "revalidatePath", but the "type" parameter is missing. This has no effect by default, see more info here https://nextjs.org/docs/app/api-reference/functions/revalidatePath`),p([r],`revalidatePath ${e}`)}function p(e,t){let r=s.workAsyncStorage.getStore();if(!r||!r.incrementalCache)throw Object.defineProperty(Error(`Invariant: static generation store missing in ${t}`),"__NEXT_ERROR_CODE",{value:"E263",enumerable:!1,configurable:!0});let a=o.workUnitAsyncStorage.getStore();if(a){if("cache"===a.type)throw Object.defineProperty(Error(`Route ${r.route} used "${t}" inside a "use cache" which is unsupported. To ensure revalidation is performed consistently it must always happen outside of renders and cached functions. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E181",enumerable:!1,configurable:!0});if("unstable-cache"===a.type)throw Object.defineProperty(Error(`Route ${r.route} used "${t}" inside a function cached with "unstable_cache(...)" which is unsupported. To ensure revalidation is performed consistently it must always happen outside of renders and cached functions. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E306",enumerable:!1,configurable:!0});if("render"===a.phase)throw Object.defineProperty(Error(`Route ${r.route} used "${t}" during render which is unsupported. To ensure revalidation is performed consistently it must always happen outside of renders and cached functions. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E7",enumerable:!1,configurable:!0});if("prerender"===a.type){let e=Object.defineProperty(Error(`Route ${r.route} used ${t} without first calling \`await connection()\`.`),"__NEXT_ERROR_CODE",{value:"E406",enumerable:!1,configurable:!0});(0,n.abortAndThrowOnSynchronousRequestDataAccess)(r.route,t,e,a)}else if("prerender-ppr"===a.type)(0,n.postponeWithTracking)(r.route,t,a.dynamicTracking);else if("prerender-legacy"===a.type){a.revalidate=0;let e=Object.defineProperty(new l.DynamicServerError(`Route ${r.route} couldn't be rendered statically because it used \`${t}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw r.dynamicUsageDescription=t,r.dynamicUsageStack=e.stack,e}}for(let t of(r.pendingRevalidatedTags||(r.pendingRevalidatedTags=[]),e))r.pendingRevalidatedTags.includes(t)||r.pendingRevalidatedTags.push(t);r.pathWasRevalidated=!0}},84882:()=>{},85531:(e,t)=>{"use strict";function r(e){return e.startsWith("/")?e:"/"+e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ensureLeadingSlash",{enumerable:!0,get:function(){return r}})},91645:e=>{"use strict";e.exports=require("net")},92079:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{GET:()=>m,POST:()=>g});var a=r(76033),i=r(62351),s=r(32190),o=r(23870),l=r(81248),c=r(5892),u=r(92531),d=r(45697),h=r(28402),p=e([h]);h=(p.then?(await p)():p)[0];let y=process.env.R2_ACCESS_KEY_ID||"",_=process.env.R2_SECRET_ACCESS_KEY||"",b=process.env.R2_ACCOUNT_ID||"",v=process.env.R2_BUCKET_NAME||"",E=`https://${b}.r2.cloudflarestorage.com`;y&&_&&b&&v||console.error("R2 configuration missing in environment variables");let R=new u.t({accessKeyId:y,secretAccessKey:_,service:"s3",region:"auto"}),w=d.z.object({ai_analysis_status:d.z.string().describe("The status of the AI analysis (e.g., 'Completed', 'Failed', 'Requires_Manual_Review')."),probability_approval:d.z.number().min(0).max(100).describe("The probability of loan approval as a percentage (0-100)."),overall_indicator:d.z.string().describe("An overall risk indicator (e.g., 'LOW_RISK', 'MEDIUM_RISK', 'HIGH_RISK')."),document_validation_percentage:d.z.number().min(0).max(100).describe("A percentage score for document validity and completeness (0-100)."),estimated_analysis_time_minutes:d.z.number().describe("Estimated time in minutes for a human to perform a similar analysis."),revenue_analysis:d.z.array(d.z.object({year:d.z.number().describe("The year for the revenue data point, e.g., 2023."),month:d.z.number().min(1).max(12).describe("The month number (1-12) for the revenue data point."),revenue:d.z.number().describe("The calculated revenue for that month. Can be positive or negative.")})).max(36).describe("An array of calculated monthly revenue data for up to the last 36 months based on financial documents. Extract as much monthly data as is available.")});async function f(e){return console.warn("Using placeholder for text extraction. This only supports plain text."),e.text()}async function m(){let e=await (0,a.U)(),{data:{user:t}}=await e.auth.getUser();if(!t)return s.NextResponse.json({error:"Unauthorized"},{status:401});let{data:r,error:n}=await e.from("credit_applications").select("*").eq("user_id",t.id);return n?s.NextResponse.json({error:n.message},{status:500}):s.NextResponse.json(r)}async function g(e){try{var t;let r=await (0,a.U)(),{data:{user:n}}=await r.auth.getUser();if(!n)return s.NextResponse.json({error:"Unauthorized"},{status:401});let u=await e.formData(),d=u.get("company_name"),p=u.get("application_type"),m=u.get("contact_person"),g=u.get("contact_email"),y=u.getAll("files");if(!y||0===y.length)return s.NextResponse.json({error:"No files uploaded."},{status:400});let _="",b=[];for(let e of y){let t=`docs/${n.id}/${(0,o.A)()}-${e.name}`,r=Buffer.from(await e.arrayBuffer());await R.fetch(`${E}/${v}/${t}`,{method:"PUT",headers:{"Content-Type":e.type,"Content-Length":r.length.toString()},body:r}),b.push({file_name:e.name,r2_object_key:t,file_size_bytes:e.size,file_type:"document"});let a=await f(e);_+=a+"\n\n---\n\n"}let S=function(){let e=process.env.OPENAI_API_KEY,t=null;try{let{env:r}=(0,h.getCloudflareContext)();t=r.AI,e=r.OPENAI_API_KEY}catch(e){console.log(e)}if(!e)throw Error("OPENAI_API_KEY not found in environment");return{AI:t,OPENAI_API_KEY:e}}(),O=(0,l.r)({baseURL:"https://openrouter.ai/api/v1",apiKey:S.OPENAI_API_KEY}),T=(t=_,t.length<=1e5?t:(console.warn(`Truncating combined document text from ${t.length} to 100000 characters.`),t.slice(0,1e5))),{object:A}=await (0,c.pY)({model:O("gpt-4o-mini"),schema:w,prompt:`You are an expert credit analyst AI. Analyze the provided financial documents for a loan application.

      Your tasks are:
      1.  Provide a general creditworthiness analysis (approval probability, risk, document validity).
      2.  Extract detailed monthly revenue data from the documents. Go back as far as possible, up to 36 months. The result must be an array of objects, each containing 'year', 'month' (1-12), and 'revenue'. If a month's data is not available, do not include it in the array.

      Combined Documents Content:
      ${T}`}),{data:P,error:C}=await r.from("credit_applications").insert({user_id:n.id,status:"completed",company_name:d,application_type:p,contact_person:m,contact_email:g,ai_analysis_status:A.ai_analysis_status,probability_approval:A.probability_approval,overall_indicator:A.overall_indicator,document_validation_percentage:A.document_validation_percentage,estimated_analysis_time_minutes:A.estimated_analysis_time_minutes,revenue:A.revenue_analysis}).select().single();if(C)return console.error("Error creating application:",C),s.NextResponse.json({error:C.message},{status:500});let x=b.map(e=>({...e,application_id:P.id})),{error:j}=await r.from("application_files").insert(x);if(j)return console.error("Error inserting files:",j),s.NextResponse.json({error:j.message},{status:500});let{data:N,error:I}=await r.from("chat_sessions").insert({application_id:P.id,user_id:n.id}).select().single();if(I)return console.error("Error creating chat session:",I),s.NextResponse.json({error:I.message},{status:500});let k=y.map(e=>e.name).join(", "),{text:$}=await (0,c.Df)({model:O("gpt-4o-mini"),prompt:`You are a credit analyst assistant. Based on the following documents, provide a concise opening summary (2-3 sentences) of the credit application. Mention the key entities or highlights. Documents Content: ${T}`,system:`At the end of your summary, list the documents you used. Format it exactly like this: "Sumber: [filename1, filename2, ...]" using the following file names: ${k}`}),{error:D}=await r.from("chat_messages").insert({session_id:N.id,sender_type:"ai",message_content:$});if(D)return console.error("Error inserting initial AI message:",D),s.NextResponse.json({error:D.message},{status:500});return(0,i.revalidatePath)("/application"),(0,i.revalidatePath)(`/dashboard/[projectId]/new-application/${P.id}`),s.NextResponse.json({success:!0,applicationId:P.id})}catch(t){let e=t instanceof Error?t.message:"Unknown error";return console.error("Server: Error processing application:",e),s.NextResponse.json({error:e},{status:500})}}n()}catch(e){n(e)}})},92531:(e,t,r)=>{"use strict";r.d(t,{t:()=>s});let n=new TextEncoder,a={appstream2:"appstream",cloudhsmv2:"cloudhsm",email:"ses",marketplace:"aws-marketplace",mobile:"AWSMobileHubService",pinpoint:"mobiletargeting",queue:"sqs","git-codecommit":"codecommit","mturk-requester-sandbox":"mturk-requester","personalize-runtime":"personalize"},i=new Set(["authorization","content-type","content-length","user-agent","presigned-expires","expect","x-amzn-trace-id","range","connection"]);class s{constructor({accessKeyId:e,secretAccessKey:t,sessionToken:r,service:n,region:a,cache:i,retries:s,initRetryMs:o}){if(null==e)throw TypeError("accessKeyId is a required option");if(null==t)throw TypeError("secretAccessKey is a required option");this.accessKeyId=e,this.secretAccessKey=t,this.sessionToken=r,this.service=n,this.region=a,this.cache=i||new Map,this.retries=null!=s?s:10,this.initRetryMs=o||50}async sign(e,t){if(e instanceof Request){let{method:r,url:n,headers:a,body:i}=e;null==(t=Object.assign({method:r,url:n,headers:a},t)).body&&a.has("Content-Type")&&(t.body=null!=i&&a.has("X-Amz-Content-Sha256")?i:await e.clone().arrayBuffer()),e=n}let r=new o(Object.assign({url:e.toString()},t,this,t&&t.aws)),n=Object.assign({},t,await r.sign());delete n.aws;try{return new Request(n.url.toString(),n)}catch(e){if(e instanceof TypeError)return new Request(n.url.toString(),Object.assign({duplex:"half"},n));throw e}}async fetch(e,t){for(let r=0;r<=this.retries;r++){let n=fetch(await this.sign(e,t));if(r===this.retries)return n;let a=await n;if(a.status<500&&429!==a.status)return a;await new Promise(e=>setTimeout(e,Math.random()*this.initRetryMs*Math.pow(2,r)))}throw Error("An unknown error occurred, ensure retries is not negative")}}class o{constructor({method:e,url:t,headers:r,body:n,accessKeyId:s,secretAccessKey:o,sessionToken:l,service:c,region:u,cache:d,datetime:p,signQuery:f,appendSessionToken:m,allHeaders:g,singleEncode:y}){let _,b;if(null==t)throw TypeError("url is a required option");if(null==s)throw TypeError("accessKeyId is a required option");if(null==o)throw TypeError("secretAccessKey is a required option");this.method=e||(n?"POST":"GET"),this.url=new URL(t),this.headers=new Headers(r||{}),this.body=n,this.accessKeyId=s,this.secretAccessKey=o,this.sessionToken=l,c&&u||([_,b]=function(e,t){let{hostname:r,pathname:n}=e;if(r.endsWith(".on.aws")){let e=r.match(/^[^.]{1,63}\.lambda-url\.([^.]{1,63})\.on\.aws$/);return null!=e?["lambda",e[1]||""]:["",""]}if(r.endsWith(".r2.cloudflarestorage.com"))return["s3","auto"];if(r.endsWith(".backblazeb2.com")){let e=r.match(/^(?:[^.]{1,63}\.)?s3\.([^.]{1,63})\.backblazeb2\.com$/);return null!=e?["s3",e[1]||""]:["",""]}let i=r.replace("dualstack.","").match(/([^.]{1,63})\.(?:([^.]{0,63})\.)?amazonaws\.com(?:\.cn)?$/),s=i&&i[1]||"",o=i&&i[2];if("us-gov"===o)o="us-gov-west-1";else if("s3"===o||"s3-accelerate"===o)o="us-east-1",s="s3";else if("iot"===s)s=r.startsWith("iot.")?"execute-api":r.startsWith("data.jobs.iot.")?"iot-jobs-data":"/mqtt"===n?"iotdevicegateway":"iotdata";else if("autoscaling"===s){let e=(t.get("X-Amz-Target")||"").split(".")[0];"AnyScaleFrontendService"===e?s="application-autoscaling":"AnyScaleScalingPlannerFrontendService"===e&&(s="autoscaling-plans")}else null==o&&s.startsWith("s3-")?(o=s.slice(3).replace(/^fips-|^external-1/,""),s="s3"):s.endsWith("-fips")?s=s.slice(0,-5):o&&/-\d$/.test(s)&&!/-\d$/.test(o)&&([s,o]=[o,s]);return[a[s]||s,o||""]}(this.url,this.headers)),this.service=c||_||"",this.region=u||b||"us-east-1",this.cache=d||new Map,this.datetime=p||new Date().toISOString().replace(/[:-]|\.\d{3}/g,""),this.signQuery=f,this.appendSessionToken=m||"iotdevicegateway"===this.service,this.headers.delete("Host"),"s3"!==this.service||this.signQuery||this.headers.has("X-Amz-Content-Sha256")||this.headers.set("X-Amz-Content-Sha256","UNSIGNED-PAYLOAD");let v=this.signQuery?this.url.searchParams:this.headers;if(v.set("X-Amz-Date",this.datetime),this.sessionToken&&!this.appendSessionToken&&v.set("X-Amz-Security-Token",this.sessionToken),this.signableHeaders=["host",...this.headers.keys()].filter(e=>g||!i.has(e)).sort(),this.signedHeaders=this.signableHeaders.join(";"),this.canonicalHeaders=this.signableHeaders.map(e=>e+":"+("host"===e?this.url.host:(this.headers.get(e)||"").replace(/\s+/g," "))).join("\n"),this.credentialString=[this.datetime.slice(0,8),this.region,this.service,"aws4_request"].join("/"),this.signQuery&&("s3"!==this.service||v.has("X-Amz-Expires")||v.set("X-Amz-Expires","86400"),v.set("X-Amz-Algorithm","AWS4-HMAC-SHA256"),v.set("X-Amz-Credential",this.accessKeyId+"/"+this.credentialString),v.set("X-Amz-SignedHeaders",this.signedHeaders)),"s3"===this.service)try{this.encodedPath=decodeURIComponent(this.url.pathname.replace(/\+/g," "))}catch(e){this.encodedPath=this.url.pathname}else this.encodedPath=this.url.pathname.replace(/\/+/g,"/");y||(this.encodedPath=encodeURIComponent(this.encodedPath).replace(/%2F/g,"/")),this.encodedPath=h(this.encodedPath);let E=new Set;this.encodedSearch=[...this.url.searchParams].filter(([e])=>{if(!e)return!1;if("s3"===this.service){if(E.has(e))return!1;E.add(e)}return!0}).map(e=>e.map(e=>h(encodeURIComponent(e)))).sort(([e,t],[r,n])=>e<r?-1:e>r?1:t<n?-1:+(t>n)).map(e=>e.join("=")).join("&")}async sign(){return this.signQuery?(this.url.searchParams.set("X-Amz-Signature",await this.signature()),this.sessionToken&&this.appendSessionToken&&this.url.searchParams.set("X-Amz-Security-Token",this.sessionToken)):this.headers.set("Authorization",await this.authHeader()),{method:this.method,url:this.url,headers:this.headers,body:this.body}}async authHeader(){return["AWS4-HMAC-SHA256 Credential="+this.accessKeyId+"/"+this.credentialString,"SignedHeaders="+this.signedHeaders,"Signature="+await this.signature()].join(", ")}async signature(){let e=this.datetime.slice(0,8),t=[this.secretAccessKey,e,this.region,this.service].join(),r=this.cache.get(t);if(!r){let n=await l("AWS4"+this.secretAccessKey,e),a=await l(n,this.region),i=await l(a,this.service);r=await l(i,"aws4_request"),this.cache.set(t,r)}return d(await l(r,await this.stringToSign()))}async stringToSign(){return["AWS4-HMAC-SHA256",this.datetime,this.credentialString,d(await c(await this.canonicalString()))].join("\n")}async canonicalString(){return[this.method.toUpperCase(),this.encodedPath,this.encodedSearch,this.canonicalHeaders+"\n",this.signedHeaders,await this.hexBodyHash()].join("\n")}async hexBodyHash(){let e=this.headers.get("X-Amz-Content-Sha256")||("s3"===this.service&&this.signQuery?"UNSIGNED-PAYLOAD":null);if(null==e){if(this.body&&"string"!=typeof this.body&&!("byteLength"in this.body))throw Error("body must be a string, ArrayBuffer or ArrayBufferView, unless you include the X-Amz-Content-Sha256 header");e=d(await c(this.body||""))}return e}}async function l(e,t){let r=await crypto.subtle.importKey("raw","string"==typeof e?n.encode(e):e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return crypto.subtle.sign("HMAC",r,n.encode(t))}async function c(e){return crypto.subtle.digest("SHA-256","string"==typeof e?n.encode(e):e)}let u=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function d(e){let t=new Uint8Array(e),r="";for(let e=0;e<t.length;e++){let n=t[e];r+=u[n>>>4&15],r+=u[15&n]}return r}function h(e){return e.replace(/[!'()*]/g,e=>"%"+e.charCodeAt(0).toString(16).toUpperCase())}},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[447,875,580,576,9],()=>r(33778));module.exports=n})();