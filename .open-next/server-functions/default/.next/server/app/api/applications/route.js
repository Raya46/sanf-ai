(()=>{var e={};e.id=179,e.ids=[179],e.modules={659:()=>{},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4128:(e,t,r)=>{"use strict";function a(e){throw Object.defineProperty(Error("cacheLife() is only available with the experimental.useCache config."),"__NEXT_ERROR_CODE",{value:"E627",enumerable:!1,configurable:!0})}Object.defineProperty(t,"F",{enumerable:!0,get:function(){return a}}),r(29294),r(63033)},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},19610:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getSortedRouteObjects:function(){return n},getSortedRoutes:function(){return a}});class r{insert(e){this._insert(e.split("/").filter(Boolean),[],!1)}smoosh(){return this._smoosh()}_smoosh(e){void 0===e&&(e="/");let t=[...this.children.keys()].sort();null!==this.slugName&&t.splice(t.indexOf("[]"),1),null!==this.restSlugName&&t.splice(t.indexOf("[...]"),1),null!==this.optionalRestSlugName&&t.splice(t.indexOf("[[...]]"),1);let r=t.map(t=>this.children.get(t)._smoosh(""+e+t+"/")).reduce((e,t)=>[...e,...t],[]);if(null!==this.slugName&&r.push(...this.children.get("[]")._smoosh(e+"["+this.slugName+"]/")),!this.placeholder){let t="/"===e?"/":e.slice(0,-1);if(null!=this.optionalRestSlugName)throw Object.defineProperty(Error('You cannot define a route with the same specificity as a optional catch-all route ("'+t+'" and "'+t+"[[..."+this.optionalRestSlugName+']]").'),"__NEXT_ERROR_CODE",{value:"E458",enumerable:!1,configurable:!0});r.unshift(t)}return null!==this.restSlugName&&r.push(...this.children.get("[...]")._smoosh(e+"[..."+this.restSlugName+"]/")),null!==this.optionalRestSlugName&&r.push(...this.children.get("[[...]]")._smoosh(e+"[[..."+this.optionalRestSlugName+"]]/")),r}_insert(e,t,a){if(0===e.length){this.placeholder=!1;return}if(a)throw Object.defineProperty(Error("Catch-all must be the last part of the URL."),"__NEXT_ERROR_CODE",{value:"E392",enumerable:!1,configurable:!0});let n=e[0];if(n.startsWith("[")&&n.endsWith("]")){let r=n.slice(1,-1),s=!1;if(r.startsWith("[")&&r.endsWith("]")&&(r=r.slice(1,-1),s=!0),r.startsWith("…"))throw Object.defineProperty(Error("Detected a three-dot character ('…') at ('"+r+"'). Did you mean ('...')?"),"__NEXT_ERROR_CODE",{value:"E147",enumerable:!1,configurable:!0});if(r.startsWith("...")&&(r=r.substring(3),a=!0),r.startsWith("[")||r.endsWith("]"))throw Object.defineProperty(Error("Segment names may not start or end with extra brackets ('"+r+"')."),"__NEXT_ERROR_CODE",{value:"E421",enumerable:!1,configurable:!0});if(r.startsWith("."))throw Object.defineProperty(Error("Segment names may not start with erroneous periods ('"+r+"')."),"__NEXT_ERROR_CODE",{value:"E288",enumerable:!1,configurable:!0});function i(e,r){if(null!==e&&e!==r)throw Object.defineProperty(Error("You cannot use different slug names for the same dynamic path ('"+e+"' !== '"+r+"')."),"__NEXT_ERROR_CODE",{value:"E337",enumerable:!1,configurable:!0});t.forEach(e=>{if(e===r)throw Object.defineProperty(Error('You cannot have the same slug name "'+r+'" repeat within a single dynamic path'),"__NEXT_ERROR_CODE",{value:"E247",enumerable:!1,configurable:!0});if(e.replace(/\W/g,"")===n.replace(/\W/g,""))throw Object.defineProperty(Error('You cannot have the slug names "'+e+'" and "'+r+'" differ only by non-word symbols within a single dynamic path'),"__NEXT_ERROR_CODE",{value:"E499",enumerable:!1,configurable:!0})}),t.push(r)}if(a)if(s){if(null!=this.restSlugName)throw Object.defineProperty(Error('You cannot use both an required and optional catch-all route at the same level ("[...'+this.restSlugName+']" and "'+e[0]+'" ).'),"__NEXT_ERROR_CODE",{value:"E299",enumerable:!1,configurable:!0});i(this.optionalRestSlugName,r),this.optionalRestSlugName=r,n="[[...]]"}else{if(null!=this.optionalRestSlugName)throw Object.defineProperty(Error('You cannot use both an optional and required catch-all route at the same level ("[[...'+this.optionalRestSlugName+']]" and "'+e[0]+'").'),"__NEXT_ERROR_CODE",{value:"E300",enumerable:!1,configurable:!0});i(this.restSlugName,r),this.restSlugName=r,n="[...]"}else{if(s)throw Object.defineProperty(Error('Optional route parameters are not yet supported ("'+e[0]+'").'),"__NEXT_ERROR_CODE",{value:"E435",enumerable:!1,configurable:!0});i(this.slugName,r),this.slugName=r,n="[]"}}this.children.has(n)||this.children.set(n,new r),this.children.get(n)._insert(e.slice(1),t,a)}constructor(){this.placeholder=!0,this.children=new Map,this.slugName=null,this.restSlugName=null,this.optionalRestSlugName=null}}function a(e){let t=new r;return e.forEach(e=>t.insert(e)),t.smoosh()}function n(e,t){let r={},n=[];for(let a=0;a<e.length;a++){let i=t(e[a]);r[i]=a,n[a]=i}return a(n).map(t=>e[r[t]])}},23496:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getSortedRouteObjects:function(){return a.getSortedRouteObjects},getSortedRoutes:function(){return a.getSortedRoutes},isDynamicRoute:function(){return n.isDynamicRoute}});let a=r(19610),n=r(49022)},23870:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(55511);let n={randomUUID:a.randomUUID},i=new Uint8Array(256),s=i.length,o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));let l=function(e,t,r){if(n.randomUUID&&!t&&!e)return n.randomUUID();let l=(e=e||{}).random??e.rng?.()??(s>i.length-16&&((0,a.randomFillSync)(i),s=0),i.slice(s,s+=16));if(l.length<16)throw Error("Random bytes length must be >= 16");if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,t){if((r=r||0)<0||r+16>t.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=l[e];return t}return function(e,t=0){return(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase()}(l)}},27910:e=>{"use strict";e.exports=require("stream")},28402:e=>{"use strict";e.exports=import("@opennextjs/cloudflare")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30826:(e,t,r)=>{"use strict";Object.defineProperty(t,"e",{enumerable:!0,get:function(){return u}});let a=r(46143),n=r(37719),i=r(29294),s=r(63033),o=r(43365),l=0;async function c(e,t,r,n,i,s,l){await t.set(r,{kind:o.CachedRouteKind.FETCH,data:{headers:{},body:JSON.stringify(e),status:200,url:""},revalidate:"number"!=typeof i?a.CACHE_ONE_YEAR:i},{fetchCache:!0,tags:n,fetchIdx:s,fetchUrl:l})}function u(e,t,r={}){if(0===r.revalidate)throw Object.defineProperty(Error(`Invariant revalidate: 0 can not be passed to unstable_cache(), must be "false" or "> 0" ${e.toString()}`),"__NEXT_ERROR_CODE",{value:"E57",enumerable:!1,configurable:!0});let a=r.tags?(0,n.validateTags)(r.tags,`unstable_cache ${e.toString()}`):[];(0,n.validateRevalidate)(r.revalidate,`unstable_cache ${e.name||e.toString()}`);let d=`${e.toString()}-${Array.isArray(t)&&t.join(",")}`;return async(...t)=>{let n=i.workAsyncStorage.getStore(),u=s.workUnitAsyncStorage.getStore(),h=(null==n?void 0:n.incrementalCache)||globalThis.__incrementalCache;if(!h)throw Object.defineProperty(Error(`Invariant: incrementalCache missing in unstable_cache ${e.toString()}`),"__NEXT_ERROR_CODE",{value:"E469",enumerable:!1,configurable:!0});let p=u&&"prerender"===u.type?u.cacheSignal:null;p&&p.beginRead();try{let i=u&&"request"===u.type?u:void 0,p=(null==i?void 0:i.url.pathname)??(null==n?void 0:n.route)??"",f=new URLSearchParams((null==i?void 0:i.url.search)??""),g=[...f.keys()].sort((e,t)=>e.localeCompare(t)).map(e=>`${e}=${f.get(e)}`).join("&"),m=`${d}-${JSON.stringify(t)}`,y=await h.generateCacheKey(m),_=`unstable_cache ${p}${g.length?"?":""}${g} ${e.name?` ${e.name}`:y}`,b=(n?n.nextFetchId:l)??1,v=null==u?void 0:u.implicitTags,E={type:"unstable-cache",phase:"render",implicitTags:v,draftMode:u&&n&&(0,s.getDraftModeProviderForCacheScope)(n,u)};if(n){if(n.nextFetchId=b+1,u&&("cache"===u.type||"prerender"===u.type||"prerender-ppr"===u.type||"prerender-legacy"===u.type)){"number"==typeof r.revalidate&&(u.revalidate<r.revalidate||(u.revalidate=r.revalidate));let e=u.tags;if(null===e)u.tags=a.slice();else for(let t of a)e.includes(t)||e.push(t)}if(!(u&&"unstable-cache"===u.type)&&"force-no-store"!==n.fetchCache&&!n.isOnDemandRevalidate&&!h.isOnDemandRevalidate&&!n.isDraftMode){let i=await h.get(y,{kind:o.IncrementalCacheKind.FETCH,revalidate:r.revalidate,tags:a,softTags:null==v?void 0:v.tags,fetchIdx:b,fetchUrl:_});if(i&&i.value)if(i.value.kind!==o.CachedRouteKind.FETCH)console.error(`Invariant invalid cacheEntry returned for ${m}`);else{let o=void 0!==i.value.data.body?JSON.parse(i.value.data.body):void 0;return i.isStale&&(n.pendingRevalidates||(n.pendingRevalidates={}),n.pendingRevalidates[m]=s.workUnitAsyncStorage.run(E,e,...t).then(e=>c(e,h,y,a,r.revalidate,b,_)).catch(e=>console.error(`revalidating cache with key: ${m}`,e))),o}}let i=await s.workUnitAsyncStorage.run(E,e,...t);return n.isDraftMode||c(i,h,y,a,r.revalidate,b,_),i}{if(l+=1,!h.isOnDemandRevalidate){let e=await h.get(y,{kind:o.IncrementalCacheKind.FETCH,revalidate:r.revalidate,tags:a,fetchIdx:b,fetchUrl:_,softTags:null==v?void 0:v.tags});if(e&&e.value){if(e.value.kind!==o.CachedRouteKind.FETCH)console.error(`Invariant invalid cacheEntry returned for ${m}`);else if(!e.isStale)return void 0!==e.value.data.body?JSON.parse(e.value.data.body):void 0}}let n=await s.workUnitAsyncStorage.run(E,e,...t);return c(n,h,y,a,r.revalidate,b,_),n}}finally{p&&p.endRead()}}}},33778:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{patchFetch:()=>c,routeModule:()=>u,serverHooks:()=>p,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>h});var n=r(96559),i=r(48088),s=r(37719),o=r(92079),l=e([o]);o=(l.then?(await l)():l)[0];let u=new n.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/applications/route",pathname:"/api/applications",filename:"route",bundlePath:"app/api/applications/route"},resolvedPagePath:"C:\\Users\\raya\\project\\belajar_nextjs\\sanf-ai\\src\\app\\api\\applications\\route.ts",nextConfigOutput:"standalone",userland:o}),{workAsyncStorage:d,workUnitAsyncStorage:h,serverHooks:p}=u;function c(){return(0,s.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:h})}a()}catch(e){a(e)}})},34631:e=>{"use strict";e.exports=require("tls")},35499:(e,t)=>{"use strict";function r(e){return"("===e[0]&&e.endsWith(")")}function a(e){return e.startsWith("@")&&"@children"!==e}function n(e,t){if(e.includes(i)){let e=JSON.stringify(t);return"{}"!==e?i+"?"+e:i}return e}Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DEFAULT_SEGMENT_KEY:function(){return s},PAGE_SEGMENT_KEY:function(){return i},addSearchParamsIfPageSegment:function(){return n},isGroupSegment:function(){return r},isParallelRouteSegment:function(){return a}});let i="__PAGE__",s="__DEFAULT__"},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},49022:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isDynamicRoute",{enumerable:!0,get:function(){return s}});let a=r(71437),n=/\/[^/]*\[[^/]+\][^/]*(?=\/|$)/,i=/\/\[[^/]+\](?=\/|$)/;function s(e,t){return(void 0===t&&(t=!0),(0,a.isInterceptionRouteAppPath)(e)&&(e=(0,a.extractInterceptionRouteInformation)(e).interceptedRoute),t)?i.test(e):n.test(e)}},51906:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=51906,e.exports=t},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},62351:(e,t,r)=>{let a={unstable_cache:r(30826).e,revalidateTag:r(83518).revalidateTag,revalidatePath:r(83518).revalidatePath,unstable_expireTag:r(83518).unstable_expireTag,unstable_expirePath:r(83518).unstable_expirePath,unstable_noStore:r(68553).M,unstable_cacheLife:r(4128).F,unstable_cacheTag:r(72932).z};e.exports=a,t.unstable_cache=a.unstable_cache,t.revalidatePath=a.revalidatePath,t.revalidateTag=a.revalidateTag,t.unstable_expireTag=a.unstable_expireTag,t.unstable_expirePath=a.unstable_expirePath,t.unstable_noStore=a.unstable_noStore,t.unstable_cacheLife=a.unstable_cacheLife,t.unstable_cacheTag=a.unstable_cacheTag},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68553:(e,t,r)=>{"use strict";Object.defineProperty(t,"M",{enumerable:!0,get:function(){return s}});let a=r(29294),n=r(63033),i=r(84971);function s(){let e=a.workAsyncStorage.getStore(),t=n.workUnitAsyncStorage.getStore();if(e)!e.forceStatic&&(e.isUnstableNoStore=!0,t&&"prerender"===t.type||(0,i.markCurrentScopeAsDynamic)(e,t,"unstable_noStore()"))}},71437:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{INTERCEPTION_ROUTE_MARKERS:function(){return n},extractInterceptionRouteInformation:function(){return s},isInterceptionRouteAppPath:function(){return i}});let a=r(74722),n=["(..)(..)","(.)","(..)","(...)"];function i(e){return void 0!==e.split("/").find(e=>n.find(t=>e.startsWith(t)))}function s(e){let t,r,i;for(let a of e.split("/"))if(r=n.find(e=>a.startsWith(e))){[t,i]=e.split(r,2);break}if(!t||!r||!i)throw Object.defineProperty(Error("Invalid interception route: "+e+". Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>"),"__NEXT_ERROR_CODE",{value:"E269",enumerable:!1,configurable:!0});switch(t=(0,a.normalizeAppPath)(t),r){case"(.)":i="/"===t?"/"+i:t+"/"+i;break;case"(..)":if("/"===t)throw Object.defineProperty(Error("Invalid interception route: "+e+". Cannot use (..) marker at the root level, use (.) instead."),"__NEXT_ERROR_CODE",{value:"E207",enumerable:!1,configurable:!0});i=t.split("/").slice(0,-1).concat(i).join("/");break;case"(...)":i="/"+i;break;case"(..)(..)":let s=t.split("/");if(s.length<=2)throw Object.defineProperty(Error("Invalid interception route: "+e+". Cannot use (..)(..) marker at the root level or one level up."),"__NEXT_ERROR_CODE",{value:"E486",enumerable:!1,configurable:!0});i=s.slice(0,-2).concat(i).join("/");break;default:throw Object.defineProperty(Error("Invariant: unexpected marker"),"__NEXT_ERROR_CODE",{value:"E112",enumerable:!1,configurable:!0})}return{interceptingRoute:t,interceptedRoute:i}}},72932:(e,t,r)=>{"use strict";function a(...e){throw Object.defineProperty(Error("cacheTag() is only available with the experimental.useCache config."),"__NEXT_ERROR_CODE",{value:"E628",enumerable:!1,configurable:!0})}Object.defineProperty(t,"z",{enumerable:!0,get:function(){return a}}),r(63033),r(37719)},74075:e=>{"use strict";e.exports=require("zlib")},74722:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{normalizeAppPath:function(){return i},normalizeRscURL:function(){return s}});let a=r(85531),n=r(35499);function i(e){return(0,a.ensureLeadingSlash)(e.split("/").reduce((e,t,r,a)=>!t||(0,n.isGroupSegment)(t)||"@"===t[0]||("page"===t||"route"===t)&&r===a.length-1?e:e+"/"+t,""))}function s(e){return e.replace(/\.rsc($|\?)/,"$1")}},76033:(e,t,r)=>{"use strict";r.d(t,{U:()=>i});var a=r(80261),n=r(44999);let i=async()=>{let e=await (0,n.UL)();return(0,a.createServerClient)("https://gskcziircorxypqexcuh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdza2N6aWlyY29yeHlwcWV4Y3VoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA1OTUyMTMsImV4cCI6MjA2NjE3MTIxM30.gQg76c18soHVeuRqxjnPiIji088qp7NTVguZUsyePDM",{cookies:{getAll:()=>e.getAll(),setAll(t){try{t.forEach(({name:t,value:r,options:a})=>{e.set(t,r,a)})}catch{console.log("Cookie setting error in Server Component - can be ignored if using middleware")}}}})}},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83518:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{revalidatePath:function(){return h},revalidateTag:function(){return c},unstable_expirePath:function(){return u},unstable_expireTag:function(){return d}});let a=r(84971),n=r(23496),i=r(46143),s=r(29294),o=r(63033),l=r(98479);function c(e){return p([e],`revalidateTag ${e}`)}function u(e,t){if(e.length>i.NEXT_CACHE_SOFT_TAG_MAX_LENGTH)return void console.warn(`Warning: expirePath received "${e}" which exceeded max length of ${i.NEXT_CACHE_SOFT_TAG_MAX_LENGTH}. See more info here https://nextjs.org/docs/app/api-reference/functions/unstable_expirePath`);let r=`${i.NEXT_CACHE_IMPLICIT_TAG_ID}${e}`;return t?r+=`${r.endsWith("/")?"":"/"}${t}`:(0,n.isDynamicRoute)(e)&&console.warn(`Warning: a dynamic page path "${e}" was passed to "expirePath", but the "type" parameter is missing. This has no effect by default, see more info here https://nextjs.org/docs/app/api-reference/functions/unstable_expirePath`),p([r],`unstable_expirePath ${e}`)}function d(...e){return p(e,`unstable_expireTag ${e.join(", ")}`)}function h(e,t){if(e.length>i.NEXT_CACHE_SOFT_TAG_MAX_LENGTH)return void console.warn(`Warning: revalidatePath received "${e}" which exceeded max length of ${i.NEXT_CACHE_SOFT_TAG_MAX_LENGTH}. See more info here https://nextjs.org/docs/app/api-reference/functions/revalidatePath`);let r=`${i.NEXT_CACHE_IMPLICIT_TAG_ID}${e}`;return t?r+=`${r.endsWith("/")?"":"/"}${t}`:(0,n.isDynamicRoute)(e)&&console.warn(`Warning: a dynamic page path "${e}" was passed to "revalidatePath", but the "type" parameter is missing. This has no effect by default, see more info here https://nextjs.org/docs/app/api-reference/functions/revalidatePath`),p([r],`revalidatePath ${e}`)}function p(e,t){let r=s.workAsyncStorage.getStore();if(!r||!r.incrementalCache)throw Object.defineProperty(Error(`Invariant: static generation store missing in ${t}`),"__NEXT_ERROR_CODE",{value:"E263",enumerable:!1,configurable:!0});let n=o.workUnitAsyncStorage.getStore();if(n){if("cache"===n.type)throw Object.defineProperty(Error(`Route ${r.route} used "${t}" inside a "use cache" which is unsupported. To ensure revalidation is performed consistently it must always happen outside of renders and cached functions. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E181",enumerable:!1,configurable:!0});if("unstable-cache"===n.type)throw Object.defineProperty(Error(`Route ${r.route} used "${t}" inside a function cached with "unstable_cache(...)" which is unsupported. To ensure revalidation is performed consistently it must always happen outside of renders and cached functions. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E306",enumerable:!1,configurable:!0});if("render"===n.phase)throw Object.defineProperty(Error(`Route ${r.route} used "${t}" during render which is unsupported. To ensure revalidation is performed consistently it must always happen outside of renders and cached functions. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E7",enumerable:!1,configurable:!0});if("prerender"===n.type){let e=Object.defineProperty(Error(`Route ${r.route} used ${t} without first calling \`await connection()\`.`),"__NEXT_ERROR_CODE",{value:"E406",enumerable:!1,configurable:!0});(0,a.abortAndThrowOnSynchronousRequestDataAccess)(r.route,t,e,n)}else if("prerender-ppr"===n.type)(0,a.postponeWithTracking)(r.route,t,n.dynamicTracking);else if("prerender-legacy"===n.type){n.revalidate=0;let e=Object.defineProperty(new l.DynamicServerError(`Route ${r.route} couldn't be rendered statically because it used \`${t}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw r.dynamicUsageDescription=t,r.dynamicUsageStack=e.stack,e}}for(let t of(r.pendingRevalidatedTags||(r.pendingRevalidatedTags=[]),e))r.pendingRevalidatedTags.includes(t)||r.pendingRevalidatedTags.push(t);r.pathWasRevalidated=!0}},84882:()=>{},85531:(e,t)=>{"use strict";function r(e){return e.startsWith("/")?e:"/"+e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ensureLeadingSlash",{enumerable:!0,get:function(){return r}})},91645:e=>{"use strict";e.exports=require("net")},92079:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{GET:()=>f,POST:()=>g});var n=r(76033),i=r(62351),s=r(32190),o=r(23870),l=r(81248),c=r(5892),u=r(92531),d=r(45697),h=r(28402),p=e([h]);h=(p.then?(await p)():p)[0];let m=process.env.R2_ACCESS_KEY_ID||"",y=process.env.R2_SECRET_ACCESS_KEY||"",_=process.env.R2_ACCOUNT_ID||"",b=process.env.R2_BUCKET_NAME||"",v=`https://${_}.r2.cloudflarestorage.com`;m&&y&&_&&b||console.error("R2 configuration missing in environment variables");let E=new u.t({accessKeyId:m,secretAccessKey:y,service:"s3",region:"auto"}),R=d.z.object({ai_analysis_status:d.z.string().describe("The status of the AI analysis (e.g., 'Completed', 'Failed', 'Requires_Manual_Review')."),ai_analysis:d.z.string().describe("The full AI analysis report generated based on the documents and user context."),probability_approval:d.z.number().min(0).max(100).describe("The probability of loan approval as a percentage (0-100)."),overall_indicator:d.z.string().describe("An overall risk indicator (e.g., 'LOW_RISK', 'MEDIUM_RISK', 'HIGH_RISK')."),document_validation_percentage:d.z.number().min(0).max(100).describe("A percentage score for document validity and completeness (0-100)."),estimated_analysis_time_minutes:d.z.number().describe("Estimated time in minutes for a human to perform a similar analysis."),revenue_analysis:d.z.array(d.z.object({year:d.z.number().describe("The year for the revenue data point, e.g., 2023."),month:d.z.number().min(1).max(12).describe("The month number (1-12) for the revenue data point."),revenue:d.z.number().describe("The calculated revenue for that month. Can be positive or negative.")})).max(36).describe("An array of calculated monthly revenue data for up to the last 36 months based on financial documents. Extract as much monthly data as is available."),company_type:d.z.string().describe("A string to make type for company example:(Heavy Equipment, Trucking, Productive, New Business "),amount:d.z.number().describe("An amount from company to analyze credit"),analysis_template:d.z.string()});async function f(){let e=await (0,n.U)(),{data:{user:t}}=await e.auth.getUser();if(!t)return s.NextResponse.json({error:"Unauthorized"},{status:401});let{data:r,error:a}=await e.from("credit_applications").select("*").eq("user_id",t.id);return a?s.NextResponse.json({error:a.message},{status:500}):s.NextResponse.json(r)}async function g(e){try{let t=await (0,n.U)(),{data:{user:r}}=await t.auth.getUser();if(!r)return s.NextResponse.json({error:"Unauthorized"},{status:401});let a=await e.formData(),u=a.get("analysis_template"),d=parseInt(a.get("risk_appetite")),p=a.get("company_type"),f=parseFloat(a.get("amount")),g=a.getAll("files");if(!g||0===g.length)return s.NextResponse.json({error:"No files uploaded."},{status:400});let m=[],y=[{type:"text",text:`You are an expert credit analyst AI. Analyze the provided financial documents (sent as image/file objects) for a loan application.
         The user has selected the "${u}" template, has a risk appetite of ${d}%, the company type is "${p}", and the requested amount is ${f}.
         Your tasks are:
         1. Generate a comprehensive creditworthiness analysis report in **pure HTML format**. This report must start with a concise summary (2-3 sentences) of the credit application, highlighting key findings like approval probability and risk indicator. Use appropriate HTML tags for headings (<h1>, <h2>), paragraphs (<p>), bold text (<b> or <strong>), italic text (<i> or <em>), and lists (<ul>, <ol>, <li>). Ensure proper line breaks and spacing using HTML tags like <br> or by structuring content within block-level elements. **Do NOT use Markdown syntax (e.g., **bold**, *italic*, - list item**) in the output.** The entire report should be a single, well-formed HTML string, suitable for direct display or export.
         2. Provide a general creditworthiness analysis (approval probability, risk, document validity).
         3. Extract detailed monthly revenue data from the documents. Go back as far as possible, up to 36 months. The result must be an array of objects, each containing 'year', 'month' (1-12), and 'revenue'. If a month's data is not available, do not include it in the array.
         Analyze the following document(s):`}];for(let e of g){let t=`docs/${r.id}/${(0,o.A)()}-${e.name}`,a=Buffer.from(await e.arrayBuffer());await E.fetch(`${v}/${b}/${t}`,{method:"PUT",headers:{"Content-Type":e.type,"Content-Length":a.length.toString()},body:a}),m.push({file_name:e.name,r2_object_key:t,file_size_bytes:e.size,file_type:"document"}),y.push({type:"image",image:a})}let _=function(){try{let{env:e}=(0,h.getCloudflareContext)();console.log("Successfully accessed Cloudflare context. Assuming production environment.");let t=e.OPENAI_API_KEY,r=e.AI;if(!t)throw console.error("CRITICAL: Cloudflare context found, but OPENAI_API_KEY secret is MISSING."),Error("OPENAI_API_KEY secret not found in Cloudflare environment.");return console.log(`Found OPENAI_API_KEY in Cloudflare secrets. Preview: ${t.substring(0,5)}...${t.slice(-4)}`),{AI:r,OPENAI_API_KEY:t}}catch(t){console.log(`Could not get Cloudflare context. Assuming local development environment.${t}`);let e=process.env.OPENAI_API_KEY;if(!e)throw console.error("❌ CRITICAL: Running locally, but OPENAI_API_KEY is MISSING from .env file."),Error("OPENAI_API_KEY not found in process.env for local development.");return console.log(`✅ Found OPENAI_API_KEY in local .env file. Preview: ${e.substring(0,5)}...${e.slice(-4)}`),{AI:null,OPENAI_API_KEY:e}}}(),w=(0,l.r)({baseURL:"https://openrouter.ai/api/v1",apiKey:_.OPENAI_API_KEY}),{object:S}=await (0,c.pY)({model:w("gpt-4o-mini"),schema:R,prompt:`${y}`}),{data:O,error:T}=await t.from("credit_applications").insert({user_id:r.id,status:"completed",analysis_template:u,risk_appetite:d,company_type:p,amount:f,ai_analysis_status:S.ai_analysis_status,probability_approval:S.probability_approval,overall_indicator:S.overall_indicator,document_validation_percentage:S.document_validation_percentage,estimated_analysis_time_minutes:S.estimated_analysis_time_minutes,revenue:S.revenue_analysis,ai_analysis:S.ai_analysis}).select().single();if(T)return console.error("Error creating application:",T),s.NextResponse.json({error:T.message},{status:500});let A=m.map(e=>({...e,application_id:O.id}));await t.from("application_files").insert(A);let{data:P}=await t.from("chat_sessions").insert({application_id:O.id,user_id:r.id}).select().single();return P&&await t.from("chat_messages").insert({session_id:P.id,sender_type:"ai",message_content:S.ai_analysis}),(0,i.revalidatePath)(`/dashboard/${r.id}/application`),(0,i.revalidatePath)(`/dashboard/${r.id}/new-application/${O.id}`),s.NextResponse.json({success:!0,applicationId:O.id})}catch(t){let e=t instanceof Error?t.message:"Unknown error";return console.error("Server: Error processing application:",e),s.NextResponse.json({error:e},{status:500})}}a()}catch(e){a(e)}})},92531:(e,t,r)=>{"use strict";r.d(t,{t:()=>s});let a=new TextEncoder,n={appstream2:"appstream",cloudhsmv2:"cloudhsm",email:"ses",marketplace:"aws-marketplace",mobile:"AWSMobileHubService",pinpoint:"mobiletargeting",queue:"sqs","git-codecommit":"codecommit","mturk-requester-sandbox":"mturk-requester","personalize-runtime":"personalize"},i=new Set(["authorization","content-type","content-length","user-agent","presigned-expires","expect","x-amzn-trace-id","range","connection"]);class s{constructor({accessKeyId:e,secretAccessKey:t,sessionToken:r,service:a,region:n,cache:i,retries:s,initRetryMs:o}){if(null==e)throw TypeError("accessKeyId is a required option");if(null==t)throw TypeError("secretAccessKey is a required option");this.accessKeyId=e,this.secretAccessKey=t,this.sessionToken=r,this.service=a,this.region=n,this.cache=i||new Map,this.retries=null!=s?s:10,this.initRetryMs=o||50}async sign(e,t){if(e instanceof Request){let{method:r,url:a,headers:n,body:i}=e;null==(t=Object.assign({method:r,url:a,headers:n},t)).body&&n.has("Content-Type")&&(t.body=null!=i&&n.has("X-Amz-Content-Sha256")?i:await e.clone().arrayBuffer()),e=a}let r=new o(Object.assign({url:e.toString()},t,this,t&&t.aws)),a=Object.assign({},t,await r.sign());delete a.aws;try{return new Request(a.url.toString(),a)}catch(e){if(e instanceof TypeError)return new Request(a.url.toString(),Object.assign({duplex:"half"},a));throw e}}async fetch(e,t){for(let r=0;r<=this.retries;r++){let a=fetch(await this.sign(e,t));if(r===this.retries)return a;let n=await a;if(n.status<500&&429!==n.status)return n;await new Promise(e=>setTimeout(e,Math.random()*this.initRetryMs*Math.pow(2,r)))}throw Error("An unknown error occurred, ensure retries is not negative")}}class o{constructor({method:e,url:t,headers:r,body:a,accessKeyId:s,secretAccessKey:o,sessionToken:l,service:c,region:u,cache:d,datetime:p,signQuery:f,appendSessionToken:g,allHeaders:m,singleEncode:y}){let _,b;if(null==t)throw TypeError("url is a required option");if(null==s)throw TypeError("accessKeyId is a required option");if(null==o)throw TypeError("secretAccessKey is a required option");this.method=e||(a?"POST":"GET"),this.url=new URL(t),this.headers=new Headers(r||{}),this.body=a,this.accessKeyId=s,this.secretAccessKey=o,this.sessionToken=l,c&&u||([_,b]=function(e,t){let{hostname:r,pathname:a}=e;if(r.endsWith(".on.aws")){let e=r.match(/^[^.]{1,63}\.lambda-url\.([^.]{1,63})\.on\.aws$/);return null!=e?["lambda",e[1]||""]:["",""]}if(r.endsWith(".r2.cloudflarestorage.com"))return["s3","auto"];if(r.endsWith(".backblazeb2.com")){let e=r.match(/^(?:[^.]{1,63}\.)?s3\.([^.]{1,63})\.backblazeb2\.com$/);return null!=e?["s3",e[1]||""]:["",""]}let i=r.replace("dualstack.","").match(/([^.]{1,63})\.(?:([^.]{0,63})\.)?amazonaws\.com(?:\.cn)?$/),s=i&&i[1]||"",o=i&&i[2];if("us-gov"===o)o="us-gov-west-1";else if("s3"===o||"s3-accelerate"===o)o="us-east-1",s="s3";else if("iot"===s)s=r.startsWith("iot.")?"execute-api":r.startsWith("data.jobs.iot.")?"iot-jobs-data":"/mqtt"===a?"iotdevicegateway":"iotdata";else if("autoscaling"===s){let e=(t.get("X-Amz-Target")||"").split(".")[0];"AnyScaleFrontendService"===e?s="application-autoscaling":"AnyScaleScalingPlannerFrontendService"===e&&(s="autoscaling-plans")}else null==o&&s.startsWith("s3-")?(o=s.slice(3).replace(/^fips-|^external-1/,""),s="s3"):s.endsWith("-fips")?s=s.slice(0,-5):o&&/-\d$/.test(s)&&!/-\d$/.test(o)&&([s,o]=[o,s]);return[n[s]||s,o||""]}(this.url,this.headers)),this.service=c||_||"",this.region=u||b||"us-east-1",this.cache=d||new Map,this.datetime=p||new Date().toISOString().replace(/[:-]|\.\d{3}/g,""),this.signQuery=f,this.appendSessionToken=g||"iotdevicegateway"===this.service,this.headers.delete("Host"),"s3"!==this.service||this.signQuery||this.headers.has("X-Amz-Content-Sha256")||this.headers.set("X-Amz-Content-Sha256","UNSIGNED-PAYLOAD");let v=this.signQuery?this.url.searchParams:this.headers;if(v.set("X-Amz-Date",this.datetime),this.sessionToken&&!this.appendSessionToken&&v.set("X-Amz-Security-Token",this.sessionToken),this.signableHeaders=["host",...this.headers.keys()].filter(e=>m||!i.has(e)).sort(),this.signedHeaders=this.signableHeaders.join(";"),this.canonicalHeaders=this.signableHeaders.map(e=>e+":"+("host"===e?this.url.host:(this.headers.get(e)||"").replace(/\s+/g," "))).join("\n"),this.credentialString=[this.datetime.slice(0,8),this.region,this.service,"aws4_request"].join("/"),this.signQuery&&("s3"!==this.service||v.has("X-Amz-Expires")||v.set("X-Amz-Expires","86400"),v.set("X-Amz-Algorithm","AWS4-HMAC-SHA256"),v.set("X-Amz-Credential",this.accessKeyId+"/"+this.credentialString),v.set("X-Amz-SignedHeaders",this.signedHeaders)),"s3"===this.service)try{this.encodedPath=decodeURIComponent(this.url.pathname.replace(/\+/g," "))}catch(e){this.encodedPath=this.url.pathname}else this.encodedPath=this.url.pathname.replace(/\/+/g,"/");y||(this.encodedPath=encodeURIComponent(this.encodedPath).replace(/%2F/g,"/")),this.encodedPath=h(this.encodedPath);let E=new Set;this.encodedSearch=[...this.url.searchParams].filter(([e])=>{if(!e)return!1;if("s3"===this.service){if(E.has(e))return!1;E.add(e)}return!0}).map(e=>e.map(e=>h(encodeURIComponent(e)))).sort(([e,t],[r,a])=>e<r?-1:e>r?1:t<a?-1:+(t>a)).map(e=>e.join("=")).join("&")}async sign(){return this.signQuery?(this.url.searchParams.set("X-Amz-Signature",await this.signature()),this.sessionToken&&this.appendSessionToken&&this.url.searchParams.set("X-Amz-Security-Token",this.sessionToken)):this.headers.set("Authorization",await this.authHeader()),{method:this.method,url:this.url,headers:this.headers,body:this.body}}async authHeader(){return["AWS4-HMAC-SHA256 Credential="+this.accessKeyId+"/"+this.credentialString,"SignedHeaders="+this.signedHeaders,"Signature="+await this.signature()].join(", ")}async signature(){let e=this.datetime.slice(0,8),t=[this.secretAccessKey,e,this.region,this.service].join(),r=this.cache.get(t);if(!r){let a=await l("AWS4"+this.secretAccessKey,e),n=await l(a,this.region),i=await l(n,this.service);r=await l(i,"aws4_request"),this.cache.set(t,r)}return d(await l(r,await this.stringToSign()))}async stringToSign(){return["AWS4-HMAC-SHA256",this.datetime,this.credentialString,d(await c(await this.canonicalString()))].join("\n")}async canonicalString(){return[this.method.toUpperCase(),this.encodedPath,this.encodedSearch,this.canonicalHeaders+"\n",this.signedHeaders,await this.hexBodyHash()].join("\n")}async hexBodyHash(){let e=this.headers.get("X-Amz-Content-Sha256")||("s3"===this.service&&this.signQuery?"UNSIGNED-PAYLOAD":null);if(null==e){if(this.body&&"string"!=typeof this.body&&!("byteLength"in this.body))throw Error("body must be a string, ArrayBuffer or ArrayBufferView, unless you include the X-Amz-Content-Sha256 header");e=d(await c(this.body||""))}return e}}async function l(e,t){let r=await crypto.subtle.importKey("raw","string"==typeof e?a.encode(e):e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return crypto.subtle.sign("HMAC",r,a.encode(t))}async function c(e){return crypto.subtle.digest("SHA-256","string"==typeof e?a.encode(e):e)}let u=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function d(e){let t=new Uint8Array(e),r="";for(let e=0;e<t.length;e++){let a=t[e];r+=u[a>>>4&15],r+=u[15&a]}return r}function h(e){return e.replace(/[!'()*]/g,e=>"%"+e.charCodeAt(0).toString(16).toUpperCase())}},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[447,875,580,576,9],()=>r(33778));module.exports=a})();