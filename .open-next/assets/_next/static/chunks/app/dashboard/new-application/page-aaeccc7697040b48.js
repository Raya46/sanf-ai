(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[211],{30285:(e,a,t)=>{"use strict";t.d(a,{$:()=>o});var s=t(95155);t(12115);var l=t(99708),r=t(74466),n=t(59434);let i=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:a,variant:t,size:r,asChild:o=!1,...d}=e,c=o?l.DX:"button";return(0,s.jsx)(c,{"data-slot":"button",className:(0,n.cn)(i({variant:t,size:r,className:a})),...d})}},33417:(e,a,t)=>{Promise.resolve().then(t.bind(t,70229))},54165:(e,a,t)=>{"use strict";t.d(a,{Cf:()=>p,Es:()=>m,L3:()=>f,c7:()=>x,lG:()=>o,rr:()=>h,zM:()=>d});var s=t(95155),l=t(12115),r=t(15452),n=t(54416),i=t(59434);let o=r.bL,d=r.l9,c=r.ZL;r.bm;let u=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(r.hJ,{ref:a,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...l})});u.displayName=r.hJ.displayName;let p=l.forwardRef((e,a)=>{let{className:t,children:l,...o}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(r.UC,{ref:a,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...o,children:[l,(0,s.jsxs)(r.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(n.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});p.displayName=r.UC.displayName;let x=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};x.displayName="DialogHeader";let m=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};m.displayName="DialogFooter";let f=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(r.hE,{ref:a,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",t),...l})});f.displayName=r.hE.displayName;let h=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(r.VY,{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",t),...l})});h.displayName=r.VY.displayName},59409:(e,a,t)=>{"use strict";t.d(a,{bq:()=>u,eb:()=>x,gC:()=>p,l6:()=>d,yv:()=>c});var s=t(95155);t(12115);var l=t(31992),r=t(66474),n=t(5196),i=t(47863),o=t(59434);function d(e){let{...a}=e;return(0,s.jsx)(l.bL,{"data-slot":"select",...a})}function c(e){let{...a}=e;return(0,s.jsx)(l.WT,{"data-slot":"select-value",...a})}function u(e){let{className:a,size:t="default",children:n,...i}=e;return(0,s.jsxs)(l.l9,{"data-slot":"select-trigger","data-size":t,className:(0,o.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...i,children:[n,(0,s.jsx)(l.In,{asChild:!0,children:(0,s.jsx)(r.A,{className:"size-4 opacity-50"})})]})}function p(e){let{className:a,children:t,position:r="popper",...n}=e;return(0,s.jsx)(l.ZL,{children:(0,s.jsxs)(l.UC,{"data-slot":"select-content",className:(0,o.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:r,...n,children:[(0,s.jsx)(m,{}),(0,s.jsx)(l.LM,{className:(0,o.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,s.jsx)(f,{})]})})}function x(e){let{className:a,children:t,...r}=e;return(0,s.jsxs)(l.q7,{"data-slot":"select-item",className:(0,o.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",a),...r,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(n.A,{className:"size-4"})})}),(0,s.jsx)(l.p4,{children:t})]})}function m(e){let{className:a,...t}=e;return(0,s.jsx)(l.PP,{"data-slot":"select-scroll-up-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,s.jsx)(i.A,{className:"size-4"})})}function f(e){let{className:a,...t}=e;return(0,s.jsx)(l.wn,{"data-slot":"select-scroll-down-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,s.jsx)(r.A,{className:"size-4"})})}},59434:(e,a,t)=>{"use strict";t.d(a,{cn:()=>r});var s=t(52596),l=t(39688);function r(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,l.QP)((0,s.$)(a))}},62523:(e,a,t)=>{"use strict";t.d(a,{p:()=>r});var s=t(95155);t(12115);var l=t(59434);function r(e){let{className:a,type:t,...r}=e;return(0,s.jsx)("input",{type:t,"data-slot":"input",className:(0,l.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...r})}},66695:(e,a,t)=>{"use strict";t.d(a,{BT:()=>o,Wu:()=>d,ZB:()=>i,Zp:()=>r,aR:()=>n});var s=t(95155);t(12115);var l=t(59434);function r(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,l.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl py-6",a),...t})}function n(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,l.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...t})}function i(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,l.cn)("leading-none font-semibold",a),...t})}function o(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,l.cn)("text-muted-foreground text-sm",a),...t})}function d(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,l.cn)("px-6",a),...t})}},70229:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>S});var s=t(95155),l=t(91788),r=t(54416),n=t(51154),i=t(84616),o=t(35695),d=t(30285),c=t(66695),u=t(62523),p=t(59409),x=t(41046),m=t(12115),f=t(51368),h=t(20067);let g=()=>(0,h.createBrowserClient)("https://gskcziircorxypqexcuh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdza2N6aWlyY29yeHlwcWV4Y3VoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA1OTUyMTMsImV4cCI6MjA2NjE3MTIxM30.gQg76c18soHVeuRqxjnPiIji088qp7NTVguZUsyePDM");var v=t(54165),b=t(54073),j=t(59434);let y=m.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsxs)(b.bL,{ref:a,className:(0,j.cn)("relative flex w-full touch-none select-none items-center",t),...l,children:[(0,s.jsx)(b.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,s.jsx)(b.Q6,{className:"absolute h-full bg-primary"})}),(0,s.jsx)(b.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});y.displayName=b.bL.displayName;var N=t(55863);function w(e){let{className:a,value:t,...l}=e;return(0,s.jsx)(N.bL,{"data-slot":"progress",className:(0,j.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",a),...l,children:(0,s.jsx)(N.C1,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(t||0),"%)")}})})}function k(){let[e,a]=(0,m.useState)(null),[t,h]=(0,m.useState)([]),[b,j]=(0,m.useState)(!1),N=(0,o.useRouter)(),[k,C]=(0,m.useState)(1),[S,z]=(0,m.useState)(""),[A,_]=(0,m.useState)("pdf"),[I,F]=(0,m.useState)([50]),[P,V]=(0,m.useState)(""),[E,T]=(0,m.useState)(""),[L,M]=(0,m.useState)(!1),[R,U]=(0,m.useState)("Starting analysis..."),[B,D]=(0,m.useState)(0);(0,m.useEffect)(()=>{(async()=>{let e=g(),{data:{user:t}}=await e.auth.getUser();a(t)})()},[]),(0,m.useEffect)(()=>{if(b){let e=["Uploading documents...","Analyzing document content...","Generating credit analysis...","Finalizing report..."],a=0,t=setInterval(()=>{U(e[a]),D(e=>Math.min(e+25,100)),a=(a+1)%e.length},1500);return()=>clearInterval(t)}U("Starting analysis..."),D(0)},[b]);let q=(0,m.useCallback)(e=>{let a=e.map(e=>({file:e,docType:"document",key:"document-".concat((0,f.A)(),".pdf")}));h(e=>[...e,...a])},[]),J=(0,m.useMemo)(()=>{let e={"application/pdf":[],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[],"application/msword":[]};return"pdf"===A?e["application/pdf"]=[".pdf"]:"docx"===A&&(e["application/vnd.openxmlformats-officedocument.wordprocessingml.document"]=[".docx"],e["application/msword"]=[".doc"]),e},[A]),{getRootProps:$,getInputProps:O,isDragActive:Z}=(0,x.VB)({onDrop:q,accept:J}),W=e=>{h(a=>a.filter(a=>a.key!==e))},Y=async()=>{if(!e||0===t.length)return void console.error("User not found or no files staged.");j(!0),M(!0);try{let e=new FormData;for(let a of(e.append("analysis_template",S),e.append("risk_appetite",I[0].toString()),e.append("company_type",P),e.append("amount",E.toString()),t))e.append("files",a.file);let a=await fetch("/api/applications",{method:"POST",body:e});if(!a.ok){let e=await a.json();throw Error(e.error||"Submission failed")}let s=await a.json();s.success&&s.applicationId?N.push("/dashboard/".concat(s.applicationId,"/chat/").concat(s.applicationId)):console.error("Submission failed with error:",s.error)}catch(e){console.error("An error occurred during submission:",e)}finally{j(!1),M(!1)}},H=()=>{C(e=>e+1)},X=()=>{C(e=>e-1)};return(0,s.jsxs)("div",{className:"flex flex-col gap-8 mt-4 mx-4 flex-1",children:[1===k&&(0,s.jsxs)("div",{className:"flex flex-col gap-4 w-full flex-1",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Step 1: Choose Analysis Template"}),(0,s.jsx)("p",{children:"Select the type of credit analysis you need."}),(0,s.jsxs)(p.l6,{onValueChange:z,value:S,children:[(0,s.jsx)(p.bq,{className:"w-full","aria-label":"Select analysis template",children:(0,s.jsx)(p.yv,{placeholder:"Select a template"})}),(0,s.jsxs)(p.gC,{className:"rounded-xl",children:[(0,s.jsx)(p.eb,{value:"standard_credit_analysis",className:"rounded-lg",children:"Standard Credit Analysis"}),(0,s.jsx)(p.eb,{value:"sme_loan_analysis",className:"rounded-lg",children:"SME Loan Analysis"}),(0,s.jsx)(p.eb,{value:"corporate_finance_analysis",className:"rounded-lg",children:"Corporate Finance Analysis"})]})]}),(0,s.jsx)("p",{children:"Company Type"}),(0,s.jsxs)(p.l6,{onValueChange:V,value:P,children:[(0,s.jsx)(p.bq,{className:"w-full","aria-label":"Select company type",children:(0,s.jsx)(p.yv,{placeholder:"Select company type"})}),(0,s.jsxs)(p.gC,{className:"rounded-xl",children:[(0,s.jsx)(p.eb,{value:"Heavy Equipment",className:"rounded-lg",children:"Heavy Equipment"}),(0,s.jsx)(p.eb,{value:"Trucking",className:"rounded-lg",children:"Trucking"}),(0,s.jsx)(p.eb,{value:"Productive",className:"rounded-lg",children:"Productive"}),(0,s.jsx)(p.eb,{value:"New Business",className:"rounded-lg",children:"New Business"})]})]}),(0,s.jsx)("p",{children:"Amount"}),(0,s.jsx)(u.p,{type:"number",value:E,onChange:e=>T(parseFloat(e.target.value)||""),placeholder:"Enter amount"}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(d.$,{onClick:H,disabled:!S||!P||""===E,children:"Next"})})]}),2===k&&(0,s.jsxs)("div",{className:"flex flex-col gap-4 w-full flex-1",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Step 2: Upload Documents"}),(0,s.jsx)("p",{children:"Select document type and upload your files (PDF or Word)."}),(0,s.jsxs)(p.l6,{onValueChange:_,value:A,children:[(0,s.jsx)(p.bq,{className:"w-full","aria-label":"Select document type",children:(0,s.jsx)(p.yv,{placeholder:"Select document type"})}),(0,s.jsxs)(p.gC,{className:"rounded-xl",children:[(0,s.jsx)(p.eb,{value:"pdf",className:"rounded-lg",children:"PDF (.pdf)"}),(0,s.jsx)(p.eb,{value:"docx",className:"rounded-lg",children:"Word (.docx, .doc)"})]})]}),(0,s.jsxs)("div",{...$(),className:"flex flex-col items-center justify-center border border-dashed rounded-lg p-4 bg-[#FBFDFF] ".concat(Z?"border-green-500":"border-blue-400"),children:[(0,s.jsx)("input",{...O()}),(0,s.jsxs)("div",{className:"py-10 text-center",children:[(0,s.jsx)(l.A,{color:"#007BFF",size:40,className:"mb-4 mx-auto"}),(0,s.jsx)("div",{className:"flex gap-1 justify-center",children:Z?(0,s.jsx)("p",{className:"text-green-500 font-bold",children:"Drop the files here ..."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["Drag & drop ",A.toUpperCase()," files here or"]}),(0,s.jsx)("p",{className:"text-blue-500 font-bold",children:"Browse"})]})}),(0,s.jsxs)(c.BT,{className:"mt-2",children:["Supports ",A.toUpperCase()," only. Please upload at least 1 document."]})]})]}),t.length>0&&(0,s.jsx)("div",{className:"p-4 border border-dashed rounded-lg flex flex-wrap gap-2",children:t.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-1 bg-gray-100 px-2 py-1 rounded-md text-sm",children:[(0,s.jsx)("p",{className:"truncate max-w-[150px]",children:e.file.name}),(0,s.jsx)(d.$,{variant:"ghost",size:"icon",className:"h-5 w-5 p-0",onClick:()=>W(e.key),children:(0,s.jsx)(r.A,{className:"h-3 w-3"})})]},e.key))}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)(d.$,{variant:"outline",onClick:X,children:"Previous"}),(0,s.jsx)(d.$,{onClick:H,disabled:0===t.length,children:"Next"})]})]}),3===k&&(0,s.jsxs)("div",{className:"flex flex-col gap-4 w-full flex-1",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Step 3: Choose Risk Appetite"}),(0,s.jsx)("p",{children:"Adjust the slider to set your desired risk appetite for the analysis."}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4 p-4 border rounded-lg",children:[(0,s.jsxs)("p",{className:"text-lg font-semibold",children:["Risk Appetite: ",I[0],"%"]}),(0,s.jsx)(y,{defaultValue:[50],max:100,step:1,onValueChange:F,className:"w-3/4"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)(d.$,{variant:"outline",onClick:X,children:"Previous"}),(0,s.jsxs)(d.$,{onClick:Y,disabled:b||0===t.length,children:[b?(0,s.jsx)(n.A,{className:"animate-spin mr-2"}):(0,s.jsx)(i.A,{className:"mr-2"}),(0,s.jsx)("span",{children:b?"Submitting...":"Submit Application"})]})]})]}),(0,s.jsx)(v.lG,{open:L,onOpenChange:M,children:(0,s.jsxs)(v.Cf,{className:"sm:max-w-[425px]",children:[(0,s.jsxs)(v.c7,{children:[(0,s.jsx)(v.L3,{children:"Processing Application"}),(0,s.jsx)(v.rr,{children:"Please wait while we analyze your documents."})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4 py-4",children:[(0,s.jsx)(n.A,{className:"animate-spin h-12 w-12 text-blue-500"}),(0,s.jsx)("p",{className:"text-lg font-medium",children:R}),(0,s.jsx)(w,{value:B,className:"w-full"})]})]})})]})}var C=t(42355);function S(){let e=(0,o.useRouter)();return(0,s.jsx)("div",{className:"flex flex-1 flex-col",children:(0,s.jsxs)("div",{className:"@container/main flex flex-1 flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(d.$,{onClick:()=>e.back(),children:(0,s.jsx)(C.A,{})}),(0,s.jsx)("h1",{className:"m-4 font-bold text-lg",children:"New Credit Application"})]}),(0,s.jsx)(k,{})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[352,576,587,205,148,133,455,80,441,684,358],()=>a(33417)),_N_E=e.O()}]);