(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[588],{39167:(e,a,s)=>{Promise.resolve().then(s.bind(s,60795))},47262:(e,a,s)=>{"use strict";s.d(a,{S:()=>i});var t=s(95155);s(12115);var r=s(76981),n=s(5196),l=s(59434);function i(e){let{className:a,...s}=e;return(0,t.jsx)(r.bL,{"data-slot":"checkbox",className:(0,l.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...s,children:(0,t.jsx)(r.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,t.jsx)(n.A,{className:"size-3.5"})})})}},60795:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>H});var t=s(95155),r=s(95879),n=s(39881),l=s(12115),i=s(59434),o=s(90792);function c(e){let{chat:a,sources:s,color:r,position:n="start"}=e,l=null==r?void 0:r.includes("text-white");return(0,t.jsx)("div",{className:(0,i.cn)("flex w-full","end"===n?"justify-end":"justify-start"),children:(0,t.jsxs)("div",{className:(0,i.cn)("max-w-[80%] rounded-lg p-3",r),children:[(0,t.jsx)("div",{className:(0,i.cn)("prose prose-sm max-w-none prose-p:my-0 prose-ul:my-2 prose-ol:my-2 prose-headings:my-2",l?"text-white":"text-black"),children:(0,t.jsx)(o.oz,{children:a})}),s&&(0,t.jsxs)("div",{className:(0,i.cn)("mt-2 text-xs",l?"text-blue-200":"text-gray-500"),children:[(0,t.jsx)("span",{className:"font-semibold",children:"Sources:"})," ",s]})]})})}var d=s(30285),x=s(60704);function u(e){let{className:a,...s}=e;return(0,t.jsx)(x.bL,{"data-slot":"tabs",className:(0,i.cn)("flex flex-col gap-2",a),...s})}function m(e){let{className:a,...s}=e;return(0,t.jsx)(x.B8,{"data-slot":"tabs-list",className:(0,i.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...s})}function h(e){let{className:a,...s}=e;return(0,t.jsx)(x.l9,{"data-slot":"tabs-trigger",className:(0,i.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...s})}function f(e){let{className:a,...s}=e;return(0,t.jsx)(x.UC,{"data-slot":"tabs-content",className:(0,i.cn)("flex-1 outline-none",a),...s})}function p(e){let{className:a,...s}=e;return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,i.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...s})}var j=s(85127),g=s(68856),b=s(58832),v=s(66695);function N(){let[e,a]=(0,l.useState)(null),[s,i]=(0,l.useState)(!0),[o,x]=(0,l.useState)(null),u=(0,l.useRef)(null),{messages:m,input:h,handleInputChange:f,handleSubmit:N,isLoading:w}=(0,r.Y_)({api:"/api/chat",body:{macroData:e},initialMessages:[{id:"1",role:"assistant",content:"Data makroekonomi telah dimuat. Tanyakan apa pun tentang data ini atau hubungannya dengan analisis kredit."}]});return(0,l.useEffect)(()=>{!async function(){try{i(!0),x(null);let e=await fetch("/api/macroeconomics");if(!e.ok)throw Error("Failed to fetch data from the server.");let s=await e.json();a(s)}catch(e){x(e.message)}finally{i(!1)}}()},[]),console.log(o),(0,t.jsxs)("div",{className:"flex flex-col flex-1 gap-4 h-full overflow-y-auto p-1",children:[(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)(v.Zp,{children:[(0,t.jsx)(v.aR,{children:(0,t.jsx)(v.ZB,{children:"Energy Prices"})}),(0,t.jsx)(v.Wu,{children:s?(0,t.jsx)(g.E,{className:"h-48 w-full"}):(0,t.jsxs)(j.XI,{children:[(0,t.jsx)(j.A0,{children:(0,t.jsxs)(j.Hj,{children:[(0,t.jsx)(j.nd,{children:"Commodity"}),(0,t.jsx)(j.nd,{className:"text-right",children:"Price"}),(0,t.jsx)(j.nd,{className:"text-right",children:"Day"}),(0,t.jsx)(j.nd,{className:"text-right",children:"%"})]})}),(0,t.jsx)(j.BF,{children:null==e?void 0:e.energy.map(e=>(0,t.jsxs)(j.Hj,{children:[(0,t.jsxs)(j.nA,{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:e.unit})]}),(0,t.jsx)(j.nA,{className:"text-right",children:e.price.toFixed(2)}),(0,t.jsxs)(j.nA,{className:"text-right flex items-center justify-end gap-1 ".concat(e.day>=0?"text-green-600":"text-red-600"),children:[e.day>=0?(0,t.jsx)(n.A,{className:"h-3 w-3"}):(0,t.jsx)(b.A,{className:"h-3 w-3"}),e.day.toFixed(2)]}),(0,t.jsxs)(j.nA,{className:"text-right ".concat(e.percent>=0?"text-green-600":"text-red-600"),children:[e.percent.toFixed(2),"%"]})]},e.name))})]})})]}),(0,t.jsxs)(v.Zp,{children:[(0,t.jsx)(v.aR,{children:(0,t.jsx)(v.ZB,{children:"Main Indicators"})}),(0,t.jsx)(v.Wu,{children:s?(0,t.jsx)(g.E,{className:"h-48 w-full"}):(0,t.jsx)(j.XI,{children:(0,t.jsx)(j.BF,{children:null==e?void 0:e.mainIndicators.map(e=>(0,t.jsxs)(j.Hj,{children:[(0,t.jsx)(j.nA,{children:e.name}),(0,t.jsx)(j.nA,{className:"text-right font-semibold",children:e.value})]},e.name))})})})]})]}),(0,t.jsxs)(v.Zp,{className:"flex flex-col flex-1",children:[(0,t.jsxs)(v.Wu,{className:"flex-1 flex flex-col gap-3 overflow-y-auto",children:[m.map(e=>(0,t.jsx)(c,{color:"user"===e.role?"bg-blue-500 text-white":"bg-muted",position:"user"===e.role?"end":"start",chat:e.content},e.id)),w&&(0,t.jsx)(c,{color:"bg-muted",position:"start",chat:"Analyzing..."})]}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),h.trim()&&N(e)},className:"relative w-full p-4",children:[(0,t.jsx)(p,{ref:u,value:h,onChange:f,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),N(e))},placeholder:"Ask about the data...",className:"min-h-[40px] w-full resize-none rounded-2xl !text-base bg-muted pr-12",rows:1,disabled:w||s}),(0,t.jsx)("div",{className:"absolute bottom-4 right-4 p-2",children:(0,t.jsx)(d.$,{type:"submit",disabled:w||!h.trim(),className:"rounded-full bg-blue-500 p-1.5 h-fit",size:"icon",children:(0,t.jsx)(n.A,{className:"w-4 h-4"})})})]})]})]})}function w(e){var a;let{activeView:s,setActiveView:i}=e,o=(0,l.useRef)(null),{messages:x,input:j,handleInputChange:g,handleSubmit:b,isLoading:v,error:w,data:k}=(0,r.Y_)({api:"/api/chat",initialMessages:[{id:"1",role:"assistant",content:"Berdasarkan dokumen yang disediakan, aplikasi kredit ini terkait dengan PT Maju Bersama. Laporan keuangan menunjukkan kesehatan finansial yang stabil selama 2 tahun terakhir, dengan pertumbuhan pendapatan yang konsisten. Rekening koran 3 bulan mengkonfirmasi likuiditas yang kuat."}],onError:e=>{console.error("Chat error:",e.message)},onFinish:e=>{console.log("Message finished streaming:",e.role)},onResponse:e=>{e.ok||console.error("Error response from API:",e.statusText)}}),y=null==k?void 0:k[k.length-1],A=null!=(a=null==y?void 0:y.status)?a:"Sedang menganalisis dokumen...";return(0,t.jsx)("div",{className:"flex flex-col flex-1 bg-white gap-3 m-4 p-4 rounded-lg h-[calc(100vh-2rem)]",children:(0,t.jsxs)(u,{value:s,onValueChange:e=>i(e),className:"flex flex-col h-full",children:[(0,t.jsxs)(m,{children:[(0,t.jsx)(h,{value:"credit-application",children:"Credit Application"}),(0,t.jsx)(h,{value:"macroeconomics",children:"Macroeconomics"})]}),(0,t.jsxs)(f,{value:"credit-application",className:"flex-1 flex flex-col gap-3 mt-2 overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto flex flex-col gap-3",children:[x.map((e,a)=>{let s,r=e.content;if("assistant"===e.role){let e=r.match(/Sources?: (.*)$/);e?(s=e[1],r=r.replace(/\n?Sources?: .*$/,"").trim()):0===a&&(s="Laporan_Keuangan_2_Tahun.pdf, Rekening_Koran_3_Bulan.pdf")}return(0,t.jsx)(c,{color:"user"===e.role?"bg-blue-500 text-white":"bg-transparent",position:"user"===e.role?"end":"start",chat:r,sources:s},e.id)}),v&&(0,t.jsx)(c,{color:"bg-transparent",position:"start",chat:A}),w&&(0,t.jsxs)("div",{children:[(0,t.jsx)(c,{color:"bg-red-100 text-red-800",position:"start",chat:"Terjadi kesalahan: ".concat(w.message,". Silakan coba lagi.")}),!1]})]}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),j.trim()&&b(e)},className:"relative w-full flex-shrink-0",children:[(0,t.jsx)(p,{ref:o,value:j,onChange:g,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),b(e))},placeholder:"Ketik pesan Anda...",className:"min-h-[24px] max-h-[calc(75dvh)] overflow-hidden resize-none rounded-2xl !text-base bg-muted pb-10 pr-12",rows:2,disabled:v}),(0,t.jsx)("div",{className:"absolute bottom-0 right-0 p-2 w-fit flex flex-row justify-end",children:(0,t.jsx)(d.$,{type:"submit",disabled:v||!j.trim(),className:"rounded-full bg-blue-500 p-1.5 h-fit border",size:"icon",children:(0,t.jsx)(n.A,{className:"w-4 h-4"})})})]})]}),(0,t.jsx)(f,{value:"macroeconomics",className:"flex-1 mt-2 overflow-hidden",children:(0,t.jsx)(N,{})})]})})}function k(e){let{title:a,description:s,icon:r,bgColor:n,iconColor:l}=e;return(0,t.jsxs)(v.Zp,{className:"bg-[#F8FAFF] flex flex-col items-center justify-center border border-[#E0F7FA]",children:[(0,t.jsx)("div",{className:"rounded-full p-2",style:{backgroundColor:n,color:l},children:r}),(0,t.jsx)(v.ZB,{children:a}),(0,t.jsx)(v.BT,{className:"text-center",children:s})]})}var y=s(22346),A=s(33109),F=s(92448),S=s(10574),C=s(9446),_=s(43453),B=s(1243),E=s(14186),I=s(97210),L=s(99890),R=s(91788),M=s(6874),P=s.n(M);let D={"Inflation Rate":(0,t.jsx)(A.A,{className:"w-8 h-8"}),"Interest Rate":(0,t.jsx)(F.A,{className:"w-8 h-8"}),"GDP Growth Rate":(0,t.jsx)(S.A,{className:"w-8 h-8"}),"Unemployment Rate":(0,t.jsx)(C.A,{className:"w-8 h-8"})};function z(e){let{activeView:a}=e,[s,r]=(0,l.useState)([]);return(0,l.useEffect)(()=>{(async()=>{if("macroeconomics"===a)try{let e=await fetch("/api/macroeconomics");if(!e.ok)throw Error("Failed to fetch sidebar data");let a=await e.json();r(a.sidebarIndicators)}catch(e){console.error(e)}})()},[a]),(0,t.jsxs)("div",{className:"sticky top-4 flex flex-col w-1/4 bg-white rounded-lg shadow-lg mr-4 p h-[calc(100vh-2rem)] overflow-y-auto",children:[(0,t.jsx)("h1",{className:"text-center font-bold my-4",children:"Analytics & Status"}),(0,t.jsx)("div",{className:"mx-4 mb-2",children:(0,t.jsx)(y.w,{})}),(0,t.jsx)("div",{className:"flex flex-col p-4 gap-4",children:"credit-application"===a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)(k,{icon:(0,t.jsx)(_.A,{className:"w-8 h-8"}),title:"85%",description:"Probabilitas Persetujuan",bgColor:"transparent",iconColor:"#007BFF"}),(0,t.jsx)(k,{icon:(0,t.jsx)(B.A,{className:"w-8 h-8"}),title:"Sedang",description:"Indikator Risiko",bgColor:"transparent",iconColor:"#FF9800"}),(0,t.jsx)(k,{icon:(0,t.jsx)(E.A,{className:"w-8 h-8"}),title:"90%",description:"Progress Validasi Dokumen",bgColor:"transparent",iconColor:"#007BFF"}),(0,t.jsx)(k,{icon:(0,t.jsx)(I.A,{className:"w-8 h-8"}),title:"15 Menit",description:"Estimasi Waktu Analisis",bgColor:"transparent",iconColor:"#007BFF"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)("p",{children:"Tautan Cepat"}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,t.jsx)(L.A,{className:"w-4 h-4"}),(0,t.jsx)("p",{children:"Lihat Laporan Lengkap"})]}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,t.jsx)(L.A,{className:"w-4 h-4"}),(0,t.jsx)("p",{children:"Lihat Laporan Lengkap"})]}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,t.jsx)(L.A,{className:"w-4 h-4"}),(0,t.jsx)("p",{children:"Lihat Laporan Lengkap"})]}),(0,t.jsxs)(d.$,{className:"bg-blue-600 flex flex-row mx-4 mb-4",children:[(0,t.jsx)(R.A,{className:"w-4 h-4"}),(0,t.jsx)(P(),{href:"/",children:"Ekspor PDF"})]})]})]}):(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)(k,{icon:(0,t.jsx)(_.A,{className:"w-8 h-8"}),title:"85%",description:"Probabilitas Persetujuan",bgColor:"transparent",iconColor:"#007BFF"}),(0,t.jsx)(k,{icon:(0,t.jsx)(B.A,{className:"w-8 h-8"}),title:"Sedang",description:"Indikator Risiko",bgColor:"transparent",iconColor:"#FF9800"}),s.map(e=>(0,t.jsx)(k,{icon:D[e.name]||(0,t.jsx)(S.A,{className:"w-8 h-8"}),title:e.value,description:e.name,bgColor:"transparent",iconColor:"#007BFF"},e.name))]})})]})}var Z=s(47262),T=s(98579);function K(){return(0,t.jsxs)(T.Sidebar,{collapsible:"offcanvas",variant:"floating",className:"my-4 mr-4 ml-3 -top-2 h-[calc(100vh-1rem)]",children:[(0,t.jsx)(T.SidebarHeader,{className:"bg-white rounded-lg",children:(0,t.jsx)(T.SidebarMenu,{children:(0,t.jsx)(T.SidebarMenuItem,{children:(0,t.jsx)(T.SidebarMenuButton,{asChild:!0,children:(0,t.jsx)(P(),{href:"/",children:(0,t.jsx)("span",{children:"SANF AI"})})})})})}),(0,t.jsx)(T.SidebarContent,{className:"bg-white rounded-lg",children:(0,t.jsxs)(T.SidebarMenu,{children:[(0,t.jsx)(T.SidebarMenuItem,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2 p-2",children:[(0,t.jsx)(Z.S,{}),(0,t.jsx)("p",{children:"Select all resources"})]})}),(0,t.jsx)(T.SidebarMenuItem,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2 p-2",children:[(0,t.jsx)(Z.S,{}),(0,t.jsx)("p",{children:"Rekening koran 3 bulan"})]})})]})})]})}function H(){let[e,a]=(0,l.useState)("credit-application");return(0,t.jsx)("div",{className:"bg-gray-200 h-screen",children:(0,t.jsx)(T.SidebarProvider,{children:(0,t.jsxs)("div",{className:"flex h-full",children:[(0,t.jsx)(K,{}),(0,t.jsx)(w,{activeView:e,setActiveView:a}),(0,t.jsx)(z,{activeView:e})]})})})}},66695:(e,a,s)=>{"use strict";s.d(a,{BT:()=>o,Wu:()=>d,X9:()=>c,ZB:()=>i,Zp:()=>n,aR:()=>l,wL:()=>x});var t=s(95155);s(12115);var r=s(59434);function n(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl py-6",a),...s})}function l(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...s})}function i(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",a),...s})}function o(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",a),...s})}function c(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-action",className:(0,r.cn)("col-start-2 row-span-2 row-start-1 self-start justify-self-end",a),...s})}function d(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",a),...s})}function x(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,r.cn)("flex items-center px-6 [.border-t]:pt-6",a),...s})}},85127:(e,a,s)=>{"use strict";s.d(a,{A0:()=>l,BF:()=>i,Gg:()=>o,Hj:()=>c,XI:()=>n,nA:()=>x,nd:()=>d,r6:()=>u});var t=s(95155);s(12115);var r=s(59434);function n(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,r.cn)("w-full caption-bottom text-sm",a),...s})})}function l(e){let{className:a,...s}=e;return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,r.cn)("[&_tr]:border-b",a),...s})}function i(e){let{className:a,...s}=e;return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,r.cn)("[&_tr:last-child]:border-0",a),...s})}function o(e){let{className:a,...s}=e;return(0,t.jsx)("tfoot",{"data-slot":"table-footer",className:(0,r.cn)("bg-muted/50 border-t font-medium [&>tr]:last:border-b-0",a),...s})}function c(e){let{className:a,...s}=e;return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,r.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...s})}function d(e){let{className:a,...s}=e;return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,r.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...s})}function x(e){let{className:a,...s}=e;return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,r.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...s})}function u(e){let{className:a,...s}=e;return(0,t.jsx)("caption",{"data-slot":"table-caption",className:(0,r.cn)("text-muted-foreground mt-4 text-sm",a),...s})}}},e=>{var a=a=>e(e.s=a);e.O(0,[352,874,848,370,789,393,8,579,441,684,358],()=>a(39167)),_N_E=e.O()}]);