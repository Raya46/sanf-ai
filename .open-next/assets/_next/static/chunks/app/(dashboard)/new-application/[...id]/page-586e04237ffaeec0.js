(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[588],{3617:(e,a,i)=>{"use strict";i.d(a,{U:()=>r});var s=i(20067);let r=()=>(0,s.createBrowserClient)("https://gskcziircorxypqexcuh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdza2N6aWlyY29yeHlwcWV4Y3VoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA1OTUyMTMsImV4cCI6MjA2NjE3MTIxM30.gQg76c18soHVeuRqxjnPiIji088qp7NTVguZUsyePDM")},22938:(e,a,i)=>{Promise.resolve().then(i.t.bind(i,6874,23)),Promise.resolve().then(i.bind(i,39305)),Promise.resolve().then(i.bind(i,83907)),Promise.resolve().then(i.bind(i,22346)),Promise.resolve().then(i.bind(i,98579))},39305:(e,a,i)=>{"use strict";i.d(a,{ChatSection:()=>h});var s=i(95155),r=i(59434),n=i(90792);function t(e){let{chat:a,sources:i,color:t,position:l="start"}=e,d=null==t?void 0:t.includes("text-white");return(0,s.jsx)("div",{className:(0,r.cn)("flex w-full","end"===l?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:(0,r.cn)("max-w-[80%] rounded-lg p-3",t),children:[(0,s.jsx)("div",{className:(0,r.cn)("prose prose-sm max-w-none prose-p:my-0 prose-ul:my-2 prose-ol:my-2 prose-headings:my-2",d?"text-white":"text-black"),children:(0,s.jsx)(n.oz,{children:a})}),i&&(0,s.jsxs)("div",{className:(0,r.cn)("mt-2 text-xs",d?"text-blue-200":"text-gray-500"),children:[(0,s.jsx)("span",{className:"font-semibold",children:"Sources:"})," ",i]})]})})}var l=i(30285),d=i(12115);function o(e){let{className:a,...i}=e;return(0,s.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...i})}var c=i(39881),u=i(95879);function h(){var e;let a=(0,d.useRef)(null),{messages:i,input:r,handleInputChange:n,handleSubmit:h,isLoading:m,error:x,data:p}=(0,u.Y_)({api:"/api/chat",initialMessages:[{id:"1",role:"assistant",content:"Berdasarkan dokumen yang disediakan, aplikasi kredit ini terkait dengan PT Maju Bersama. Laporan keuangan menunjukkan kesehatan finansial yang stabil selama 2 tahun terakhir, dengan pertumbuhan pendapatan yang konsisten. Rekening koran 3 bulan mengkonfirmasi likuiditas yang kuat."}],onError:e=>{console.error("Chat error:",e.message)},onFinish:e=>{console.log("Message finished streaming:",e.role)},onResponse:e=>{e.ok||console.error("Error response from API:",e.statusText)}}),b=null==p?void 0:p[p.length-1],g=null!=(e=null==b?void 0:b.status)?e:"Sedang menganalisis dokumen...";return(0,s.jsxs)("div",{className:"flex flex-col flex-1 bg-white gap-3 m-4 p-4 rounded-lg h-[calc(100vh-2rem)]",children:[(0,s.jsx)("h1",{className:"flex-shrink-0",children:"Credit Application"}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto flex flex-col gap-3",children:[i.map((e,a)=>{let i,r=e.content;if("assistant"===e.role){let e=r.match(/Sources?: (.*)$/);e?(i=e[1],r=r.replace(/\n?Sources?: .*$/,"").trim()):0===a&&(i="Laporan_Keuangan_2_Tahun.pdf, Rekening_Koran_3_Bulan.pdf")}return(0,s.jsx)(t,{color:"user"===e.role?"bg-blue-500 text-white":"bg-transparent",position:"user"===e.role?"end":"start",chat:r,sources:i},e.id)}),m&&(0,s.jsx)(t,{color:"bg-transparent",position:"start",chat:g}),x&&(0,s.jsxs)("div",{children:[(0,s.jsx)(t,{color:"bg-red-100 text-red-800",position:"start",chat:"Terjadi kesalahan: ".concat(x.message,". Silakan coba lagi.")}),!1]})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r.trim()&&h(e)},className:"relative w-full flex-shrink-0",children:[(0,s.jsx)(o,{ref:a,value:r,onChange:n,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),h(e))},placeholder:"Ketik pesan Anda...",className:"min-h-[24px] max-h-[calc(75dvh)] overflow-hidden resize-none rounded-2xl !text-base bg-muted pb-10 pr-12",rows:2,disabled:m}),(0,s.jsx)("div",{className:"absolute bottom-0 right-0 p-2 w-fit flex flex-row justify-end",children:(0,s.jsx)(l.$,{type:"submit",disabled:m||!r.trim(),className:"rounded-full bg-blue-500 p-1.5 h-fit border",size:"icon",children:(0,s.jsx)(c.A,{className:"w-4 h-4"})})})]})]})}},47262:(e,a,i)=>{"use strict";i.d(a,{S:()=>l});var s=i(95155);i(12115);var r=i(76981),n=i(5196),t=i(59434);function l(e){let{className:a,...i}=e;return(0,s.jsx)(r.bL,{"data-slot":"checkbox",className:(0,t.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...i,children:(0,s.jsx)(r.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,s.jsx)(n.A,{className:"size-3.5"})})})}},83907:(e,a,i)=>{"use strict";i.d(a,{CreditSidebar:()=>c});var s=i(95155),r=i(47262),n=i(98579),t=i(6874),l=i.n(t),d=i(12115),o=i(3617);function c(e){let{applicationId:a}=e,[i,t]=(0,d.useState)([]),[c,u]=(0,d.useState)(!0),[h,m]=(0,d.useState)([]);(0,d.useEffect)(()=>{(async()=>{if(!a)return u(!1);let e=(0,o.U)(),{data:i,error:s}=await e.from("application_files").select("id, file_name").eq("application_id",a);s?(console.error("Error fetching application files:",s),t([])):i&&t(i),u(!1)})()},[a]);let x=(e,a)=>{m(i=>!0===a?[...i,e]:i.filter(a=>a!==e))},p=i.length>0&&h.length===i.length,b=h.length>0&&h.length<i.length;return(0,s.jsxs)(n.Sidebar,{collapsible:"offcanvas",variant:"floating",className:"my-4 mr-2 ml-3 -top-2 h-[calc(100vh-1rem)] w-80 flex-shrink-0",children:[(0,s.jsx)(n.SidebarHeader,{className:"bg-white rounded-lg",children:(0,s.jsx)(n.SidebarMenu,{children:(0,s.jsx)(n.SidebarMenuItem,{children:(0,s.jsx)(n.SidebarMenuButton,{asChild:!0,children:(0,s.jsx)(l(),{href:"/",children:(0,s.jsx)("span",{children:"SANF AI"})})})})})}),(0,s.jsx)(n.SidebarContent,{className:"bg-white rounded-lg",children:(0,s.jsxs)(n.SidebarMenu,{children:[(0,s.jsx)(n.SidebarMenuItem,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2 p-2",children:[(0,s.jsx)(r.S,{id:"select-all",checked:!!p||!!b&&"indeterminate",onCheckedChange:e=>{!0===e?m(i.map(e=>e.id)):m([])}}),(0,s.jsx)("p",{children:"Select all resources"})]})}),c?(0,s.jsx)(n.SidebarMenuItem,{children:(0,s.jsx)("div",{className:"p-2 text-sm text-gray-500",children:"Loading files..."})}):i.map(e=>(0,s.jsx)(n.SidebarMenuItem,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2 p-2",children:[(0,s.jsx)(r.S,{id:e.id,checked:h.includes(e.id),onCheckedChange:a=>x(e.id,a)}),(0,s.jsx)("p",{children:e.file_name})]})},e.id))]})})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[352,874,848,370,750,862,579,441,684,358],()=>a(22938)),_N_E=e.O()}]);